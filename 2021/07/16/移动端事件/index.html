<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.1"><link rel="apple-touch-icon" sizes="180x180" href="/liuqi_blogs/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/liuqi_blogs/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/liuqi_blogs/images/favicon-16x16-next.png"><link rel="mask-icon" href="/liuqi_blogs/images/logo.svg" color="#222"><link rel="stylesheet" href="/liuqi_blogs/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/black/pace-theme-material.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"dreamtraveler-liuqi.github.io","root":"/liuqi_blogs/","images":"/liuqi_blogs/images","scheme":"Pisces","darkmode":false,"version":"8.10.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":19,"offset":13},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/liuqi_blogs/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/liuqi_blogs/js/config.js"></script><meta name="description" content="移动端事件在前端的移动Web开发中，有一部分事件只在移动端产生，如触摸相关的事件。接下来给大家简单总结一下移动端的事件。 1. PC端事件在移动端的兼容问题1.1 click事件的200~300ms延迟问题由于移动端默认的布局视口宽度是980像素，所以网页文字非常小，为了快速让网页还原到原来的大小，Safari最新引入了双击缩放功能：用户双击手机页面的时候，浏览器会智能的缩放当前页面到原始大小。"><meta property="og:type" content="article"><meta property="og:title" content="移动端事件"><meta property="og:url" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/index.html"><meta property="og:site_name" content="刘琪的博客"><meta property="og:description" content="移动端事件在前端的移动Web开发中，有一部分事件只在移动端产生，如触摸相关的事件。接下来给大家简单总结一下移动端的事件。 1. PC端事件在移动端的兼容问题1.1 click事件的200~300ms延迟问题由于移动端默认的布局视口宽度是980像素，所以网页文字非常小，为了快速让网页还原到原来的大小，Safari最新引入了双击缩放功能：用户双击手机页面的时候，浏览器会智能的缩放当前页面到原始大小。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://upload-images.jianshu.io/upload_images/4393631-fc8152e419ebd000.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/572/format/webp"><meta property="og:image" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/image/image-20200706000225103.png"><meta property="og:image" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/image/image-20200706000435872.png"><meta property="og:image" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/image/image-20200706000458421.png"><meta property="og:image" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/image/image-20200706000520690.png"><meta property="og:image" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/image/image-20200706000552162.png"><meta property="og:image" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/image/image-20200706000611403.png"><meta property="og:image" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/image/image-20200706000631489.png"><meta property="og:image" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/image/image-20200706000649920.png"><meta property="og:image" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/image/image-20200706000711531.png"><meta property="article:published_time" content="2021-07-16T04:21:06.000Z"><meta property="article:modified_time" content="2022-02-24T03:23:41.449Z"><meta property="article:author" content="bricklayer"><meta property="article:tag" content="移动端"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/4393631-fc8152e419ebd000.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/572/format/webp"><link rel="canonical" href="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/","path":"2021/07/16/移动端事件/","title":"移动端事件"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>移动端事件 | 刘琪的博客</title><noscript><link rel="stylesheet" href="/liuqi_blogs/css/noscript.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"></noscript><script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><script src="/live2d-widget/autoload.js"></script></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/liuqi_blogs/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">刘琪的博客</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">世间所有的相遇，都是久别重逢</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/liuqi_blogs/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/liuqi_blogs/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/liuqi_blogs/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/liuqi_blogs/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-top"><a href="/liuqi_blogs/top/" rel="section"><i class="fa fa-book fa-fw"></i>热榜</a></li><li class="menu-item menu-item-tool"><a href="/liuqi_blogs/tool/" rel="section"><i class="fa fa-toolbox fa-fw"></i>工具</a></li><li class="menu-item menu-item-movies"><a href="/liuqi_blogs/movies/" rel="section"><i class="fa fa-video fa-fw"></i>观影</a></li><li class="menu-item menu-item-books"><a href="/liuqi_blogs/books/" rel="section"><i class="fa fa-book fa-fw"></i>阅读</a></li><li class="menu-item menu-item-links"><a href="/liuqi_blogs/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-commonweal"><a href="https://tding.top/404" rel="noopener" target="_blank"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6"><span class="nav-text">移动端事件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-PC%E7%AB%AF%E4%BA%8B%E4%BB%B6%E5%9C%A8%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98"><span class="nav-text">1. PC端事件在移动端的兼容问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-click%E4%BA%8B%E4%BB%B6%E7%9A%84200-300ms%E5%BB%B6%E8%BF%9F%E9%97%AE%E9%A2%98"><span class="nav-text">1.1 click事件的200~300ms延迟问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-dblclick%E4%BA%8B%E4%BB%B6%E5%A4%B1%E6%95%88"><span class="nav-text">1.2 dblclick事件失效</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%89%B9%E6%9C%89%E7%9A%84touch%E4%BA%8B%E4%BB%B6"><span class="nav-text">2. 移动端特有的touch事件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-touch%E4%BA%8B%E4%BB%B6%E4%B8%8Eclick%E4%BA%8B%E4%BB%B6%E5%90%8C%E6%97%B6%E8%A7%A6%E5%8F%91"><span class="nav-text">2.1 touch事件与click事件同时触发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-touchstart%E4%BA%8B%E4%BB%B6"><span class="nav-text">2.2 touchstart事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-touchmove%E4%BA%8B%E4%BB%B6"><span class="nav-text">2.3 touchmove事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-touchend%E4%BA%8B%E4%BB%B6"><span class="nav-text">2.4 touchend事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-touchcancel%E4%BA%8B%E4%BB%B6"><span class="nav-text">2.5 touchcancel事件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E8%A7%A6%E6%91%B8%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="nav-text">3. 触摸事件对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-TouchEvent"><span class="nav-text">3.1 TouchEvent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-TouchList%E8%AF%A6%E8%A7%A3"><span class="nav-text">3.2 TouchList详解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-Touch%E8%AF%A6%E8%A7%A3"><span class="nav-text">3.3 Touch详解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%B0%81%E8%A3%85%E7%A7%BB%E5%8A%A8%E7%AB%AFtap%E4%BA%8B%E4%BB%B6"><span class="nav-text">4. 封装移动端tap事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E8%A7%A6%E6%91%B8%E6%89%8B%E5%8A%BF%E5%B0%81%E8%A3%85%E7%9B%B8%E5%85%B3%E7%9A%84%E6%A1%86%E6%9E%B6%E5%8F%8A%E4%BA%8B%E4%BB%B6"><span class="nav-text">5. 触摸手势封装相关的框架及事件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-tap%E7%B1%BB%E4%BA%8B%E4%BB%B6"><span class="nav-text">5.1 tap类事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-swipe%E7%B1%BB%E4%BA%8B%E4%BB%B6"><span class="nav-text">5.2 swipe类事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-zepto%E7%9A%84%E6%89%8B%E5%8A%BF%E7%9B%B8%E5%85%B3%E4%BA%8B%E4%BB%B6"><span class="nav-text">5.3 zepto的手势相关事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-%E5%85%B6%E4%BB%96%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%89%8B%E5%8A%BF%E7%9B%B8%E5%85%B3%E5%BA%93"><span class="nav-text">5.4 其他移动端手势相关库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%82%B9%E5%87%BB%E7%A9%BF%E9%80%8F%E9%97%AE%E9%A2%98"><span class="nav-text">6. 移动端点击穿透问题</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="bricklayer" src="/liuqi_blogs/uploads/imageHead.jpg"><p class="site-author-name" itemprop="name">bricklayer</p><div class="site-description" itemprop="description">The proper use of comments is to compensate for our failure to express ourself in code.</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/liuqi_blogs/archives/"><span class="site-state-item-count">51</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/liuqi_blogs/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/liuqi_blogs/tags/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="sidebar-button site-overview-item animated"><button><i class="fa fa-comment"></i> Chat</button></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://gitee.com/home_liuqi" title="GitHub → https:&#x2F;&#x2F;gitee.com&#x2F;home_liuqi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:lq289233@163.com" title="E-Mail → mailto:lq289233@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://stackoverflow.com/" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a></span></div><div><canvas id="canvas" style="width:60%">当前浏览器不支持canvas，请更换浏览器后再试</canvas></div><script>!function(){var o,a,r,f,t,i=[[[0,0,1,1,1,0,0],[0,1,1,0,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,0,1,1,0],[0,0,1,1,1,0,0]],[[0,0,0,1,1,0,0],[0,1,1,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[1,1,1,1,1,1,1]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,0,1,1,1,0],[0,0,1,1,1,1,0],[0,1,1,0,1,1,0],[1,1,0,0,1,1,0],[1,1,1,1,1,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,1,1]],[[1,1,1,1,1,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,0,0],[1,1,1,1,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,1,1,0,0,0,0]],[[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0]]],e=document.getElementById("canvas");function h(t,e){for(var n=[1,2,3],l=["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"],o=0;o<i[e].length;o++)for(var a,h=0;h<i[e][o].length;h++){1==i[e][o][h]&&(a={x:14*(f+2)*t+2*h*(f+1)+(f+1),y:2*o*(f+1)+(f+1),stepX:Math.floor(4*Math.random()-2),stepY:-2*n[Math.floor(Math.random()*n.length)],color:l[Math.floor(Math.random()*l.length)],disY:1},r.push(a))}}function n(){e.height=100;for(var t=0;t<a.length;t++)!function(t,e){for(var n=0;n<i[e].length;n++)for(var l=0;l<i[e][n].length;l++)1==i[e][n][l]&&(o.beginPath(),o.arc(14*(f+2)*t+2*l*(f+1)+(f+1),2*n*(f+1)+(f+1),f,0,2*Math.PI),o.closePath(),o.fill())}(t,a[t]);for(t=0;t<r.length;t++)o.beginPath(),o.arc(r[t].x,r[t].y,f,0,2*Math.PI),o.fillStyle=r[t].color,o.closePath(),o.fill()}e.getContext&&(o=e.getContext("2d"),e.height=100,e.width=700,o.fillStyle="#f00",o.fillRect(10,10,50,50),a=[],r=[],f=e.height/20-1,t=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),a.push(t[1],t[2],10,t[3],t[4],10,t[5],t[6]),clearInterval(void 0),setInterval(function(){!function(){var t=[],e=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),n=[];n.push(e[1],e[2],10,e[3],e[4],10,e[5],e[6]);for(var l=a.length-1;0<=l;l--)n[l]!==a[l]&&t.push(l+"_"+(Number(a[l])+1)%10);for(l=0;l<t.length;l++)h.apply(this,t[l].split("_"));a=n.concat()}(),function(){for(var t=0;t<r.length;t++)r[t].stepY+=r[t].disY,r[t].x+=r[t].stepX,r[t].y+=r[t].stepY,(r[t].x>700+f||r[t].y>100+f)&&(r.splice(t,1),t--)}(),n()},50))}()</script></div></div><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=66282&auto=0&height=66"></iframe><div class="back-to-top animated" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://gitee.com/home_liuqi" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/liuqi_blogs/uploads/imageHead.jpg"><meta itemprop="name" content="bricklayer"><meta itemprop="description" content="The proper use of comments is to compensate for our failure to express ourself in code."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="刘琪的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">移动端事件</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-07-16 12:21:06" itemprop="dateCreated datePublished" datetime="2021-07-16T12:21:06+08:00">2021-07-16</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-02-24 11:23:41" itemprop="dateModified" datetime="2022-02-24T11:23:41+08:00">2022-02-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/liuqi_blogs/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">移动端</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>10k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>9 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="移动端事件"><a href="#移动端事件" class="headerlink" title="移动端事件"></a>移动端事件</h1><p>在前端的移动Web开发中，有一部分事件只在移动端产生，如触摸相关的事件。接下来给大家简单总结一下移动端的事件。</p><h2 id="1-PC端事件在移动端的兼容问题"><a href="#1-PC端事件在移动端的兼容问题" class="headerlink" title="1. PC端事件在移动端的兼容问题"></a>1. PC端事件在移动端的兼容问题</h2><h3 id="1-1-click事件的200-300ms延迟问题"><a href="#1-1-click事件的200-300ms延迟问题" class="headerlink" title="1.1 click事件的200~300ms延迟问题"></a>1.1 click事件的200~300ms延迟问题</h3><p>由于移动端默认的布局视口宽度是980像素，所以网页文字非常小，为了快速让网页还原到原来的大小，Safari最新引入了双击缩放功能：用户双击手机页面的时候，浏览器会智能的缩放当前页面到原始大小。</p><span id="more"></span><blockquote><p>双击缩放的原理就是，当用户click一次之后，浏览器会经过约300ms之后检测是否再有一次click，如果有的话，就会缩放页面。否则的话就是一个click事件。</p></blockquote><p>由于双击缩放功能存在，click事件触发就会有大约200~300ms的延迟。</p><h3 id="1-2-dblclick事件失效"><a href="#1-2-dblclick事件失效" class="headerlink" title="1.2 dblclick事件失效"></a>1.2 dblclick事件失效</h3><p>由于双击缩放的存在，pc端的dblclick事件也失效了。</p><h2 id="2-移动端特有的touch事件"><a href="#2-移动端特有的touch事件" class="headerlink" title="2. 移动端特有的touch事件"></a>2. 移动端特有的touch事件</h2><p>由于移动端设备大都具备触摸功能，所以移动端浏览器都引入了触摸(touch)事件。</p><p>touch相关的事件跟普通的其他dom事件一样使用，可以直接用addEventListener来监听和处理。</p><p>最基本的touch事件包括4个事件：</p><ol><li>touchstart： 当在屏幕上按下手指时触发</li><li>touchmove： 当在屏幕上移动手指时触发</li><li>touchend： 当在屏幕上抬起手指时触发</li><li>touchcancel 当一些更高级别的事件发生的时候（如电话接入或者弹出信息）会取消当前的touch操作，即触发touchcancel。一般会在touchcancel时暂停游戏、存档等操作。</li></ol><h3 id="2-1-touch事件与click事件同时触发"><a href="#2-1-touch事件与click事件同时触发" class="headerlink" title="2.1 touch事件与click事件同时触发"></a>2.1 touch事件与click事件同时触发</h3><p>在很多情况下，触摸事件和鼠标事件会同时被触发（目的是让没有对触摸设备优化的代码仍然可以在触摸设备上正常工作）。</p><p>因为双击缩放检测的存在，在移动设备屏幕上点击操作的事件执行顺序：</p><p><strong>touchstart(瞬间触发) → touchend → click(200-300ms延迟)</strong></p><blockquote><p>如果你使用了触摸事件，可以调用 event.preventDefault()来阻止鼠标事件被触发。</p></blockquote><h3 id="2-2-touchstart事件"><a href="#2-2-touchstart事件" class="headerlink" title="2.2 touchstart事件"></a>2.2 touchstart事件</h3><p>当用户手指触摸到的触摸屏的时候触发。事件对象的 target 就是touch 发生位置的那个元素。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    点击我！</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    box.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchstart&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;touchstart&#x27;</span>); </span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-3-touchmove事件"><a href="#2-3-touchmove事件" class="headerlink" title="2.3 touchmove事件"></a>2.3 touchmove事件</h3><p>当用户在触摸屏上移动触点(手指)的时候，触发这个事件。一定是先要触发touchstart事件，再有可能触发 touchmove 事件。</p><p>touchmove 事件的target 与最先触发的 touchstart 的 target 保持一致。touchmove事件和鼠标的mousemove事件一样都会多次重复调用，所以，事件处理时不能有太多耗时操作。不同的设备，移动同样的距离 touchmove 事件的触发频率是不同的。</p><blockquote><p>注意：</p><ol><li>即使手指移出了 原来的target 元素，则 touchmove 仍然会被一直触发，而且 target 仍然是原来的 target 元素。</li><li>touchmove事件会多次重复触发，由于移动端计算资源宝贵，尽量保证<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://www.2cto.com/kf/201411/352213.html">事件节流</a></li></ol></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> i = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> p = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;p&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    box.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchmove&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        p.<span class="property">innerHTML</span> = e.<span class="property">target</span>.<span class="property">tagName</span> + <span class="string">&quot;, &quot;</span> + i++;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/4393631-fc8152e419ebd000.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/572/format/webp" alt="img"></p><h3 id="2-4-touchend事件"><a href="#2-4-touchend事件" class="headerlink" title="2.4 touchend事件"></a>2.4 touchend事件</h3><p>当用户的手指抬起的时候，会触发 touchend 事件。如何用户的手指从触屏设备的边缘移出了触屏设备，也会触发 touchend 事件。</p><blockquote><p>touchend 事件的 target 也是与 touchstart 的 target 一致，即使已经移出了元素。</p></blockquote><img src="image/image-20200706000225103.png" alt="image-20200706000225103" style="zoom:50%"><p>一次完整的touch事件的触发顺序和过程</p><h3 id="2-5-touchcancel事件"><a href="#2-5-touchcancel事件" class="headerlink" title="2.5 touchcancel事件"></a>2.5 touchcancel事件</h3><p>当触点由于某些原因被中断时触发。有几种可能的原因如下(具体的原因根据不同的设备和浏览器有所不同):</p><ul><li>由于某个事件取消了触摸：例如触摸过程被一个模态的弹出框打断。</li><li>触点离开了文档窗口，而进入了浏览器的界面元素、插件或者其他外部内容区域。</li><li>当用户产生的触点个数超过了设备支持的个数，从而导致 TouchList 中最早的 Touch对象被取消</li></ul><blockquote><p>touchcancel 事件一般用于保存现场数据。比如：正在玩游戏，如果发生了 。touchcancel 事件，则应该把游戏当前状态相关的一些数据保存起来。</p></blockquote><h2 id="3-触摸事件对象"><a href="#3-触摸事件对象" class="headerlink" title="3. 触摸事件对象"></a>3. 触摸事件对象</h2><p><code>TouchEvent</code> 是一类描述手指在触摸平面（触摸屏、触摸板等）的状态变化的事件。这类事件用于描述一个或多个触点，使开发者可以检测触点的移动，触点的增加和减少，等等。</p><p>每 个 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/Touch"><code>Touch</code></a> 对象代表一个触点; 每个触点都由其位置，大小，形状，压力大小，和目标 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/Element"><code>element</code></a> 描述。 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/TouchList"><code>TouchList</code></a> 对象代表多个触点的一个列表.</p><h3 id="3-1-TouchEvent"><a href="#3-1-TouchEvent" class="headerlink" title="3.1 TouchEvent"></a>3.1 TouchEvent</h3><p><em><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/TouchEvent"><code>TouchEvent</code></a>的属性继承了 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/UIEvent"><code>UIEvent</code></a> 和 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/Event"><code>Event</code></a>。</em></p><p>属性列表：</p><ol><li><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/TouchEvent/changedTouches"><code>TouchEvent.changedTouches</code></a>： 一个 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/TouchList"><code>TouchList</code></a> 对象，包含了代表所有从上一次触摸事件到此次事件过程中，状态发生了改变的触点的 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/Touch"><code>Touch</code></a> 对象。</li><li><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/TouchEvent/targetTouches"><code>TouchEvent.targetTouches</code></a>： 一个 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/TouchList"><code>TouchList</code></a> 对象，是包含了如下触点的 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/Touch"><code>Touch</code></a> 对象：触摸起始于当前事件的目标 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/Element"><code>element</code></a> 上，并且仍然没有离开触摸平面的触点。</li><li><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/TouchEvent/touches"><code>TouchEvent.touches</code></a>： 一 个 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/TouchList"><code>TouchList</code></a> 对象，包含了所有当前接触触摸平面的触点的 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/Touch"><code>Touch</code></a> 对象，无论它们的起始于哪个 <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://developer.mozilla.org/zh-CN/docs/Web/API/Element"><code>element</code></a> 上，也无论它们状态是否发生了变化。</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">   <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">     <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">     <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">     <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#09c</span>;</span></span><br><span class="line"><span class="language-css">     <span class="attribute">background-color</span>: <span class="number">#0dc</span>;</span></span><br><span class="line"><span class="language-css">   &#125;</span></span><br><span class="line"><span class="language-css"> </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">     <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.box&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">     box.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchstart&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">dir</span>(e); <span class="comment">// 查看TouchEvent对象的属性和方法</span></span></span><br><span class="line"><span class="language-javascript">     &#125;);</span></span><br><span class="line"><span class="language-javascript">   &#125;</span></span><br><span class="line"><span class="language-javascript"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="image/image-20200706000435872.png" alt="image-20200706000435872" style="zoom:50%"><h3 id="3-2-TouchList详解"><a href="#3-2-TouchList详解" class="headerlink" title="3.2 TouchList详解"></a>3.2 TouchList详解</h3><p>一个<code>TouchList</code>代表一个触摸屏幕上所有触点的列表。</p><p>举例来讲, 如果一个用户用三根手指接触屏幕(或者触控板), 与之相关的<code>TouchList</code> 对于每根手指都会生成一个 <code>Touch</code>对象, 共计 3 个.</p><ol><li><p>只读属性：<code>length</code></p><p>返回这个<code>TouchList</code>中<code>Touch</code>对的个数。(就是有几个手指接触到了屏幕)</p></li><li><p>方法：<code>item(index)</code></p><p>返回<code>TouchList</code>中指定索引的<code>Touch</code>对象。</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 50px; color: #ffffff;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> p = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;p&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    box.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchend&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        p.<span class="property">innerHTML</span> = e.<span class="property">changedTouches</span>.<span class="property">length</span>;  <span class="comment">//返回Touch对象的个数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; e.<span class="property">changedTouches</span>.<span class="property">length</span>; i++)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//遍历出来每个Touch对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">changedTouches</span>.<span class="title function_">item</span>(i));</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="image/image-20200706000458421.png" alt="image-20200706000458421"></p><p><strong>测试多个手机触摸屏幕：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> p = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;p&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    div.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchstart&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> msg = <span class="string">&quot;touches.length: &quot;</span> + e.<span class="property">touches</span>.<span class="property">length</span> +</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;&lt;br&gt; targetTouches.length: &quot;</span> + e.<span class="property">targetTouches</span>.<span class="property">length</span> +</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;&lt;br&gt; changedTouches.length: &quot;</span> + e.<span class="property">changedTouches</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">        p.<span class="property">innerHTML</span> = msg;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>操作：</p><ol><li><p>放1个手指在div上</p><img src="image/image-20200706000520690.png" alt="image-20200706000520690" style="zoom:50%"></li><li><p>先放1个手指在其他地方，然后再放1个手指在<code>div</code>上</p><img src="image/image-20200706000552162.png" alt="image-20200706000552162" style="zoom:50%"></li><li><p>先放1个手指在其他地方，然后再逐渐放2个手指在div上</p><img src="image/image-20200706000611403.png" alt="image-20200706000611403" style="zoom:50%"></li></ol><h2 id="3-3-Touch详解"><a href="#3-3-Touch详解" class="headerlink" title="3.3 Touch详解"></a>3.3 Touch详解</h2><p><code>Touch</code>表示用户和触摸设备之间接触时单独的交互点(<code>a single point of contact</code>)。 这个交互点通常是一个手指或者触摸笔， 触摸设备通常是触摸屏或者触摸板。</p><p>基本属性列表（都是只读）:</p><table><thead><tr><th>编号</th><th>属性名</th><th>属性说明</th></tr></thead><tbody><tr><td>1.</td><td><code>identifier</code></td><td>表示每 1 个 <code>Touch</code> 对象 的独一无二的 <code>identifier</code>。有了这个 <code>identifier</code> 可以确保你总能追踪到这个 <code>Touch</code>对象。</td></tr><tr><td>2.</td><td><code>screenX</code></td><td>触摸点相对于屏幕左边缘的 <code>x</code> 坐标。</td></tr><tr><td>3.</td><td><code>scre</code>enY</td><td>触摸点相对于屏幕上边缘的 <code>y</code> 坐标。</td></tr><tr><td>4.</td><td><code>clientX</code></td><td>触摸点相对于浏览器的 <code>viewport</code>左边缘的 <code>x</code> 坐标。不会包括左边的滚动距离。</td></tr><tr><td>5.</td><td><code>clientY</code></td><td>触摸点相对于浏览器的 <code>viewport</code>上边缘的 <code>y</code> 坐标。不会包括上边的滚动距离。</td></tr><tr><td>6.</td><td><code>pageX</code></td><td>触摸点相对于 <code>document</code>的左边缘的 <code>x</code> 坐标。 与 <code>clientX</code> 不同的是，他包括左边滚动的距离，如果有的话。</td></tr><tr><td>7.</td><td><code>pageY</code></td><td>触摸点相对于 <code>document</code>的左边缘的 <code>y</code> 坐标。 与 <code>clientY</code> 不同的是，他包括上边滚动的距离，如果有的话。</td></tr><tr><td>8.</td><td><code>target</code></td><td>总是表示 手指最开始放在触摸设备上的触发点所在位置的 <code>element</code>。 即使已经移出了元素甚至移出了<code>document</code>, 他表示的<code>element</code>仍然不变</td></tr></tbody></table><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> p = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">box.<span class="property">ontouchstart</span> = <span class="keyword">function</span> (<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> touchList = e.<span class="property">changedTouches</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; touchList.<span class="property">length</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">var</span> touch = touchList[i];</span><br><span class="line">        <span class="keyword">var</span> msg = <span class="string">`id : <span class="subst">$&#123;touch.identifier&#125;</span> &lt;br&gt;</span></span><br><span class="line"><span class="string">                       screenX : <span class="subst">$&#123;touch.screenX&#125;</span> &lt;br&gt;</span></span><br><span class="line"><span class="string">                       screenY : <span class="subst">$&#123;touch.screenY&#125;</span> &lt;br&gt;</span></span><br><span class="line"><span class="string">                       clientX : <span class="subst">$&#123;touch.clientX&#125;</span> &lt;br&gt;</span></span><br><span class="line"><span class="string">                       clientY : <span class="subst">$&#123;touch.clientY&#125;</span> &lt;br&gt;</span></span><br><span class="line"><span class="string">                       pageX : <span class="subst">$&#123;touch.pageX&#125;</span> &lt;br&gt;</span></span><br><span class="line"><span class="string">                       pageY : <span class="subst">$&#123;touch.pageY&#125;</span> &lt;br&gt;</span></span><br><span class="line"><span class="string">                       target: <span class="subst">$&#123;touch.target.nodeName&#125;</span> &lt;br&gt;</span></span><br><span class="line"><span class="string">                        `</span>;</span><br><span class="line">        p.<span class="property">innerHTML</span> = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>没有左右滚动：</p><img src="image/image-20200706000631489.png" alt="image-20200706000631489" style="zoom:50%"><p>左右滚动：<code>pageX</code> 明显大于 <code>clientX</code></p><img src="image/image-20200706000649920.png" alt="image-20200706000649920" style="zoom:50%"><h2 id="4-封装移动端tap事件"><a href="#4-封装移动端tap事件" class="headerlink" title="4. 封装移动端tap事件"></a>4. 封装移动端tap事件</h2><p>由于点击事件经常使用，如果用click会有延迟问题，一般我们会用touch事件模拟移动端的点击事件, 以下是封装的几个事件，仅供参考。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"><span class="variable language_">window</span></span>)&#123;  <span class="comment">//传入window，提高变量的查找效率</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">myQuery</span>(<span class="params">selector</span>)&#123;  <span class="comment">//这个函数就是对外提供的接口。</span></span><br><span class="line">        <span class="comment">//调用这个函数的原型对象上的_init方法，并返回</span></span><br><span class="line">        <span class="keyword">return</span> myQuery.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">_init</span>(selector);</span><br><span class="line">    &#125;</span><br><span class="line">    myQuery.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">        <span class="comment">/*初始化方法，获取当前query对象的方法*/</span></span><br><span class="line">        <span class="attr">_init</span>: <span class="keyword">function</span> (<span class="params">selector</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> selector == <span class="string">&quot;string&quot;</span>)&#123;</span><br><span class="line">                <span class="comment">//把查找到的元素存入到这个原型对象上。</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ele</span> = <span class="variable language_">window</span>.<span class="property">document</span>.<span class="title function_">querySelector</span>(selector);</span><br><span class="line">                <span class="comment">//返回值其实就是原型对象。</span></span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">/*单击事件：</span></span><br><span class="line"><span class="comment">         * 为了规避click的300ms的延迟，自定义一个单击事件</span></span><br><span class="line"><span class="comment">         * 触发时间：</span></span><br><span class="line"><span class="comment">         *   当抬起手指的时候触发</span></span><br><span class="line"><span class="comment">         *   需要判断手指落下和手指抬起的事件间隔，如果小于500ms表示单击时间。</span></span><br><span class="line"><span class="comment">         *   如果是大于等于500ms，算是长按时间</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="attr">tap</span>: <span class="keyword">function</span> (<span class="params">handler</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">ele</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchstart&quot;</span>, touchFn);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">ele</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchend&quot;</span>, touchFn);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> startTime,</span><br><span class="line">                endTime;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">function</span> <span class="title function_">touchFn</span>(<span class="params">e</span>)&#123;</span><br><span class="line">                e.<span class="title function_">preventDefault</span>()</span><br><span class="line">                <span class="keyword">switch</span> (e.<span class="property">type</span>)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;touchstart&quot;</span>:</span><br><span class="line">                        startTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;touchend&quot;</span>:</span><br><span class="line">                        endTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span><br><span class="line">                        <span class="keyword">if</span> (endTime - startTime &lt; <span class="number">500</span>)&#123;</span><br><span class="line">                            handler.<span class="title function_">call</span>(<span class="variable language_">this</span>, e);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 长按</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> <span class="variable">handler</span></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="attr">longTag</span>: <span class="keyword">function</span> (<span class="params">handler</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">ele</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchstart&quot;</span>, touchFn);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">ele</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchmove&quot;</span>, touchFn);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">ele</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchend&quot;</span>, touchFn);</span><br><span class="line">            <span class="keyword">var</span> timerId;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">function</span> <span class="title function_">touchFn</span>(<span class="params">e</span>)&#123;</span><br><span class="line">                <span class="keyword">switch</span> (e.<span class="property">type</span>)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;touchstart&quot;</span> :  <span class="comment">//500ms之后执行</span></span><br><span class="line">                        timerId = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">                            handler.<span class="title function_">call</span>(<span class="variable language_">this</span>, e);</span><br><span class="line">                        &#125;, <span class="number">500</span>)</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;touchmove&quot;</span> :</span><br><span class="line">                        <span class="comment">//如果中间有移动也清除定时器</span></span><br><span class="line">                        <span class="built_in">clearTimeout</span>(timerId)</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;touchend&quot;</span> :</span><br><span class="line">                        <span class="comment">//如果在500ms之内抬起了手指，则需要定时器</span></span><br><span class="line">                        <span class="built_in">clearTimeout</span>(timerId);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 左侧滑动。</span></span><br><span class="line"><span class="comment">         * 记录手指按下的左边，在离开的时候计算 deltaX是否满足左滑的条件         </span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="attr">slideLeft</span>: <span class="keyword">function</span> (<span class="params">handler</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">ele</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchstart&quot;</span>, touchFn);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">ele</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchend&quot;</span>, touchFn);</span><br><span class="line">            <span class="keyword">var</span> startX, startY, endX, endY;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">function</span> <span class="title function_">touchFn</span>(<span class="params">e</span>)&#123;</span><br><span class="line">                e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                <span class="keyword">var</span> firstTouch = e.<span class="property">changedTouches</span>[<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">switch</span> (e.<span class="property">type</span>)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;touchstart&quot;</span>:</span><br><span class="line">                        startX = firstTouch.<span class="property">pageX</span>;</span><br><span class="line">                        startY = firstTouch.<span class="property">pageY</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;touchend&quot;</span>:</span><br><span class="line">                        endX = firstTouch.<span class="property">pageX</span>;</span><br><span class="line">                        endY = firstTouch.<span class="property">pageY</span>;</span><br><span class="line">                        <span class="comment">//x方向移动大于y方向的移动，并且x方向的移动大于25个像素，表示在向左侧滑动</span></span><br><span class="line">                        <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(endX - startX) &gt;= <span class="title class_">Math</span>.<span class="title function_">abs</span>(endY - startY) &amp;&amp; startX - endX &gt;= <span class="number">25</span>)&#123;</span><br><span class="line">                            handler.<span class="title function_">call</span>(<span class="variable language_">this</span>, e);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">/* 右侧滑动 */</span></span><br><span class="line">        <span class="attr">rightLeft</span>: <span class="keyword">function</span> (<span class="params">e</span>)&#123;</span><br><span class="line">            <span class="comment">//<span class="doctag">TODO:</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">$</span> = <span class="variable language_">window</span>.<span class="property">myQuery</span> = myQuery;</span><br><span class="line">&#125;)(<span class="variable language_">window</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ========================</span></span><br><span class="line"><span class="comment">// 使用：</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">tap</span>(<span class="keyword">function</span> (<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;单击事件&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">longTag</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;长按事件&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">slideLeft</span>(<span class="keyword">function</span> (<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">innerHTML</span> = <span class="string">&quot;左侧滑动了.....&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="5-触摸手势封装相关的框架及事件"><a href="#5-触摸手势封装相关的框架及事件" class="headerlink" title="5. 触摸手势封装相关的框架及事件"></a>5. 触摸手势封装相关的框架及事件</h2><p>手势相关的事件一般就是tap类（触屏）和滑动（swipe)事件两类。都是基于原生的touchstart、touchmove、touchend事件，封装成不同的手势类型自定义事件。</p><h3 id="5-1-tap类事件"><a href="#5-1-tap类事件" class="headerlink" title="5.1 tap类事件"></a>5.1 tap类事件</h3><p>触碰事件，我目前还不知道它和touch的区别，一般用于代替click事件，有tap longTap singleTap doubleTap四种之分。</p><ol><li>tap: 手指碰一下屏幕会触发</li><li>longTap: 手指长按屏幕会触发</li><li>singleTap: 手指碰一下屏幕会触发</li><li>doubleTap: 手指双击屏幕会触发</li></ol><h3 id="5-2-swipe类事件"><a href="#5-2-swipe类事件" class="headerlink" title="5.2 swipe类事件"></a>5.2 swipe类事件</h3><p>滑动事件，有swipe swipeLeft swipeRight swipeUp swipeDown 五种之分。</p><ol><li>swipe：手指在屏幕上滑动时会触发</li><li>swipeLeft：手指在屏幕上向左滑动时会触发</li><li>swipeRight：手指在屏幕上向右滑动时会触发</li><li>swipeUp：手指在屏幕上向上滑动时会触发</li><li>swipeDown：手指在屏幕上向下滑动时会触发</li></ol><img src="image/image-20200706000711531.png" alt="image-20200706000711531" style="zoom:50%"><h3 id="5-3-zepto的手势相关事件"><a href="#5-3-zepto的手势相关事件" class="headerlink" title="5.3 zepto的手势相关事件"></a>5.3 zepto的手势相关事件</h3><p><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://www.zeptojs.cn/">Zepto.js</a> 是一个轻量级的针对现代高级浏览器的JavaScript库， 它适配了jQuery的大部分api，也就是jQuery怎么用，Zepto.js就怎么用。它非常小，非常适合移动端。</p><p>Zepto.js的touch模块中封装了手势相关的代码。封装了再触摸设备上触发tap– 和 swipe– 相关事件，也适用于所有的<code>touch</code>(iOS, Android)和<code>pointer</code>事件(Windows Phone)。</p><ul><li>触屏事件：tap、singleTap、doubleTap、longTap(&gt;750ms）</li><li>滑动事件：swipe、swipeLeft,、swipeRight,、swipeUp,、swipeDown</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"><span class="selector-class">.delete</span> &#123; <span class="attribute">display</span>: none; &#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">items</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>List item 1 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">delete</span>&gt;</span>DELETE<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>List item 2 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">delete</span>&gt;</span>DELETE<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&#x27;#items li&#x27;</span>).<span class="title function_">swipe</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  $(<span class="string">&#x27;.delete&#x27;</span>).<span class="title function_">hide</span>()</span></span><br><span class="line"><span class="language-javascript">  $(<span class="string">&#x27;.delete&#x27;</span>, <span class="variable language_">this</span>).<span class="title function_">show</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&#x27;.delete&#x27;</span>).<span class="title function_">tap</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  $(<span class="variable language_">this</span>).<span class="title function_">parent</span>(<span class="string">&#x27;li&#x27;</span>).<span class="title function_">remove</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-4-其他移动端手势相关库"><a href="#5-4-其他移动端手势相关库" class="headerlink" title="5.4 其他移动端手势相关库"></a>5.4 其他移动端手势相关库</h3><ol><li><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://github.com/Clouda-team/touchjs">百度云的touch.js</a></li><li><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://github.com/hammerjs/hammer.js">hammer.js</a><br>hammer提供了不仅仅tap、swipe等事件，还提供了：pan（平移)、pinch类（捏拿缩放）、 press类（按住）、 rotate类（旋转）类手势支持， <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://www.cnblogs.com/imwtr/p/5884484.html">hammer.js详解教程</a></li></ol><h2 id="6-移动端点击穿透问题"><a href="#6-移动端点击穿透问题" class="headerlink" title="6. 移动端点击穿透问题"></a>6. 移动端点击穿透问题</h2><p>如果某个返回按钮的位置，恰好在要返回的这个页面的带有href属性的a标签的范围内，在点击返回按钮后，页面快速切换到有a标签的页面，300ms后触发了click事件，从而触发了a标签的意外跳转，这个就是典型的点击穿透问题。罪魁祸首其实就是a标签跳转默认是click事件触发，而移动端的touch事件触发之后，依然会在300ms后触发click事件。</p><p>解决办法：<br>1.就是阻止触发touch事件完成后的click事件。<br>2.不要混用touch和click事件。显然不可能都绑定click事件，因为要解决300ms延迟问题(除了fastclick)，那么只能都绑定touch事件，这样click事件永远不会被触发。</p><blockquote><p>注意：zepto并没有阻止click事件，所以使用zepto的tap事件依然会导致点击穿透问题，你需要手动添加 e.preventDefault() 来阻止click事件。</p></blockquote></div><footer class="post-footer"><div><div class="end-slogan" style="text-align:center;font-size:22px;letter-spacing:10px;user-seclect:none;color:#bbb">----------- 本文结束啦<i class="fa fa-star"></i>感谢您阅读-----------</div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>bricklayer</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/" title="移动端事件">https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/移动端事件/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="post-tags"><a href="/liuqi_blogs/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" rel="tag"><i class="fa fa-tag"></i> 移动端</a></div><div class="post-nav"><div class="post-nav-item"><a href="/liuqi_blogs/2021/06/11/%E7%AC%AC%E4%B8%80%E5%91%A8-%E6%8C%AF%E6%B6%9B%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE-vue/" rel="prev" title="项目实战——振涛考试系统"><i class="fa fa-chevron-left"></i> 项目实战——振涛考试系统</a></div><div class="post-nav-item"><a href="/liuqi_blogs/2021/07/21/JS%E5%88%A4%E6%96%AD%E6%B5%8F%E8%A7%88%E5%99%A8%E7%89%88%E6%9C%AC/" rel="next" title="JS判断浏览器版本">JS判断浏览器版本 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments gitalk-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">bricklayer</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">208k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">3:09</span></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div><br><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("04/21/2019 15:54:40");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已安全运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/liuqi_blogs/js/comments.js"></script><script src="/liuqi_blogs/js/utils.js"></script><script src="/liuqi_blogs/js/motion.js"></script><script src="/liuqi_blogs/js/next-boot.js"></script><script src="/liuqi_blogs/js/bookmark.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script><script src="/liuqi_blogs/js/third-party/search/local-search.js"></script><script class="next-config" data-name="chatra" type="application/json">{"enable":true,"async":true,"id":"wTiSz28MRatGt3XP9"}</script><script src="/liuqi_blogs/js/third-party/chat/chatra.js"></script><script async src="https://call.chatra.io/chatra.js"></script><script src="/liuqi_blogs/js/third-party/pace.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://dreamtraveler-liuqi.github.io/liuqi_blogs/2021/07/16/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/"}</script><script src="/liuqi_blogs/js/third-party/quicklink.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous"><script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"dreamtraveler-LiuQi","repo":"liuqi_blogs","client_id":"19a753bd5b85ab148023","client_secret":"f7d55927c2a17ea02efbea90437fc31ee899daff","admin_user":"LiuQi","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"cd5d1c5dad6c1457b8fb56994fa21d37"}</script><script src="/liuqi_blogs/js/third-party/comments/gitalk.js"></script><script>class Circle {
    constructor({ origin, speed, color, angle, context }) {
        this.origin = origin
        this.position = { ...this.origin }
        this.color = color
        this.speed = speed
        this.angle = angle
        this.context = context
        this.renderCount = 0
      }

      draw() {
          this.context.fillStyle = this.color
          this.context.beginPath()
          this.context.arc(this.position.x, this.position.y, 2, 0, Math.PI * 2)
          this.context.fill()
      }

      move() {
          this.position.x = (Math.sin(this.angle) * this.speed) + this.position.x
          this.position.y = (Math.cos(this.angle) * this.speed) + this.position.y + (this.renderCount * 0.3)
          this.renderCount++
      }
  }
  class Boom {
      constructor({ origin, context, circleCount = 16, area }) {
          this.origin = origin
          this.context = context
          this.circleCount = circleCount
          this.area = area
          this.stop = false
          this.circles = []
      }

      randomArray(range) {
          const length = range.length
          const randomIndex = Math.floor(length * Math.random())
          return range[randomIndex]
      }

      randomColor() {
          const range = ['8', '9', 'A', 'B', 'C', 'D', 'E', 'F']
          return '#' + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range)
      }

      randomRange(start, end) {
          return (end - start) * Math.random() + start
      }

      init() {
          for (let i = 0; i < this.circleCount; i++) {
              const circle = new Circle({
                  context: this.context,
                  origin: this.origin,
                  color: this.randomColor(),
                  angle: this.randomRange(Math.PI - 1, Math.PI + 1),
                  speed: this.randomRange(1, 6)
              })
              this.circles.push(circle)
          }
      }

      move() {
          this.circles.forEach((circle, index) => {
              if (circle.position.x > this.area.width || circle.position.y > this.area.height) {
                  return this.circles.splice(index, 1)
              }
              circle.move()
          })
          if (this.circles.length == 0) {
              this.stop = true
          }
      }

      draw() {
          this.circles.forEach(circle => circle.draw())
      }
  }

  class CursorSpecialEffects {
      constructor() {
          this.computerCanvas = document.createElement('canvas')
          this.renderCanvas = document.createElement('canvas')

          this.computerContext = this.computerCanvas.getContext('2d')
          this.renderContext = this.renderCanvas.getContext('2d')

          this.globalWidth = window.innerWidth
          this.globalHeight = window.innerHeight

          this.booms = []
          this.running = false
      }

      handleMouseDown(e) {
          const boom = new Boom({
              origin: { x: e.clientX, y: e.clientY },
              context: this.computerContext,
              area: {
                  width: this.globalWidth,
                  height: this.globalHeight
              }
          })
          boom.init()
          this.booms.push(boom)
          this.running || this.run()
      }

      handlePageHide() {
          this.booms = []
          this.running = false
      }

      init() {
          const style = this.renderCanvas.style
          style.position = 'fixed'
          style.top = style.left = 0
          style.zIndex = '999999999999999999999999999999999999999999'
          style.pointerEvents = 'none'

          style.width = this.renderCanvas.width = this.computerCanvas.width = this.globalWidth
          style.height = this.renderCanvas.height = this.computerCanvas.height = this.globalHeight

          document.body.append(this.renderCanvas)

          window.addEventListener('mousedown', this.handleMouseDown.bind(this))
          window.addEventListener('pagehide', this.handlePageHide.bind(this))
      }

      run() {
          this.running = true
          if (this.booms.length == 0) {
              return this.running = false
          }

          requestAnimationFrame(this.run.bind(this))

          this.computerContext.clearRect(0, 0, this.globalWidth, this.globalHeight)
          this.renderContext.clearRect(0, 0, this.globalWidth, this.globalHeight)

          this.booms.forEach((boom, index) => {
              if (boom.stop) {
                  return this.booms.splice(index, 1)
              }
              boom.move()
              boom.draw()
          })
          this.renderContext.drawImage(this.computerCanvas, 0, 0, this.globalWidth, this.globalHeight)
      }
  }

  const cursorSpecialEffects = new CursorSpecialEffects()
  cursorSpecialEffects.init()</script><script>!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.POWERMODE=e():t.POWERMODE=e()}(this,function(){return r={},o.m=n=[function(t,e,l){"use strict";var n=document.createElement("canvas");n.width=window.innerWidth,n.height=window.innerHeight,n.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999",window.addEventListener("resize",function(){n.width=window.innerWidth,n.height=window.innerHeight}),document.body.appendChild(n);var r=n.getContext("2d"),c=[],p=0;function o(t,e){return Math.random()*(e-t)+t}function u(t){if(f.colorful){var e=o(0,360);return"hsla("+o(e-10,e+10)+", 100%, "+o(50,80)+"%, 1)"}return window.getComputedStyle(t).color}function f(){for(var t,e,o,n,r,i,a=function(){var t=document.activeElement;if("TEXTAREA"===t.tagName||"INPUT"===t.tagName&&"text"===t.getAttribute("type")){var e=l(1)(t,t.selectionStart),o=t.getBoundingClientRect();return{x:e.left+o.left,y:e.top+o.top,color:u(t)}}var n=window.getSelection();if(n.rangeCount){var r=n.getRangeAt(0),i=r.startContainer;return i.nodeType===document.TEXT_NODE&&(i=i.parentNode),{x:(o=r.getBoundingClientRect()).left,y:o.top,color:u(i)}}return{x:0,y:0,color:"transparent"}}(),d=5+Math.round(10*Math.random());d--;)c[p]=(t=a.x,e=a.y,o=a.color,{x:t,y:e,alpha:1,color:o,velocity:{x:2*Math.random()-1,y:2*Math.random()-3.5}}),p=(p+1)%500;f.shake&&(r=(n=1+2*Math.random())*(.5<Math.random()?-1:1),i=n*(.5<Math.random()?-1:1),document.body.style.marginLeft=r+"px",document.body.style.marginTop=i+"px",setTimeout(function(){document.body.style.marginLeft="",document.body.style.marginTop=""},75))}f.shake=!0,f.colorful=!1,requestAnimationFrame(function t(){requestAnimationFrame(t),r.clearRect(0,0,n.width,n.height);for(var e=0;e<c.length;++e){var o=c[e];o.alpha<=.1||(o.velocity.y+=.075,o.x+=o.velocity.x,o.y+=o.velocity.y,o.alpha*=.96,r.globalAlpha=o.alpha,r.fillStyle=o.color,r.fillRect(Math.round(o.x-1.5),Math.round(o.y-1.5),3,3))}}),t.exports=f},function(t,e){function o(t,e,o){var n,r=o&&o.debug||!1;!r||(n=document.querySelector("#input-textarea-caret-position-mirror-div"))&&n.parentNode.removeChild(n);var i=document.createElement("div");i.id="input-textarea-caret-position-mirror-div",document.body.appendChild(i);var a=i.style,d=window.getComputedStyle?getComputedStyle(t):t.currentStyle;a.whiteSpace="pre-wrap","INPUT"!==t.nodeName&&(a.wordWrap="break-word"),a.position="absolute",r||(a.visibility="hidden"),p.forEach(function(t){a[t]=d[t]}),u?t.scrollHeight>parseInt(d.height)&&(a.overflowY="scroll"):a.overflow="hidden",i.textContent=t.value.substring(0,e),"INPUT"===t.nodeName&&(i.textContent=i.textContent.replace(/\s/g," "));var l=document.createElement("span");l.textContent=t.value.substring(e)||".",i.appendChild(l);var c={top:l.offsetTop+parseInt(d.borderTopWidth),left:l.offsetLeft+parseInt(d.borderLeftWidth)};return r?l.style.backgroundColor="#aaa":document.body.removeChild(i),c}var p,u;p=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],u=null!=window.mozInnerScreenX,void 0!==t&&void 0!==t.exports?t.exports=o:window.getCaretCoordinates=o}],o.c=r,o.p="",o(0);function o(t){if(r[t])return r[t].exports;var e=r[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,o),e.loaded=!0,e.exports}var n,r})</script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE)</script><script src="/liuqi_blogs/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{jsonPath:"/liuqi_blogs/live2dw/assets/hibiki.model.json"},display:{position:"left",width:150,height:330},mobile:{show:!0},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>