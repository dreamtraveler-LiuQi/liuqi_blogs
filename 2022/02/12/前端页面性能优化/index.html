<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.1"><link rel="apple-touch-icon" sizes="180x180" href="/liuqi_blogs/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/liuqi_blogs/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/liuqi_blogs/images/favicon-16x16-next.png"><link rel="mask-icon" href="/liuqi_blogs/images/logo.svg" color="#222"><link rel="stylesheet" href="/liuqi_blogs/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/black/pace-theme-material.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"dreamtraveler-liuqi.github.io","root":"/liuqi_blogs/","images":"/liuqi_blogs/images","scheme":"Pisces","darkmode":false,"version":"8.10.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":19,"offset":13},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/liuqi_blogs/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/liuqi_blogs/js/config.js"></script><meta name="description" content="前端 Vue 工程的性能优化笔记。 前端性能优化的目的是为了让用户访问网站的时候可以非常快的加载出来，常见的优化方法：减小资源大小、CDN 加速、浏览器缓存。 Vue 页面优化v-for 优化不在同一级使用 v-for、v-if当 v-if 与 v-for 一起使用时，v-for 具有比 v-if 更高的优先级，这意味着 v-if 将分别重复运行于每个 v-for 循环中。"><meta property="og:type" content="article"><meta property="og:title" content="前端页面性能优化"><meta property="og:url" content="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2022/02/12/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/index.html"><meta property="og:site_name" content="刘琪的博客"><meta property="og:description" content="前端 Vue 工程的性能优化笔记。 前端性能优化的目的是为了让用户访问网站的时候可以非常快的加载出来，常见的优化方法：减小资源大小、CDN 加速、浏览器缓存。 Vue 页面优化v-for 优化不在同一级使用 v-for、v-if当 v-if 与 v-for 一起使用时，v-for 具有比 v-if 更高的优先级，这意味着 v-if 将分别重复运行于每个 v-for 循环中。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-02-12T02:01:14.000Z"><meta property="article:modified_time" content="2022-02-24T04:02:56.650Z"><meta property="article:author" content="bricklayer"><meta property="article:tag" content="前端，性能优化"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2022/02/12/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://dreamtraveler-liuqi.github.io/liuqi_blogs/2022/02/12/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","path":"2022/02/12/前端页面性能优化/","title":"前端页面性能优化"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>前端页面性能优化 | 刘琪的博客</title><noscript><link rel="stylesheet" href="/liuqi_blogs/css/noscript.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"></noscript><script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><script src="/live2d-widget/autoload.js"></script></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/liuqi_blogs/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">刘琪的博客</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">世间所有的相遇，都是久别重逢</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/liuqi_blogs/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/liuqi_blogs/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/liuqi_blogs/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/liuqi_blogs/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-top"><a href="/liuqi_blogs/top/" rel="section"><i class="fa fa-book fa-fw"></i>热榜</a></li><li class="menu-item menu-item-tool"><a href="/liuqi_blogs/tool/" rel="section"><i class="fa fa-toolbox fa-fw"></i>工具</a></li><li class="menu-item menu-item-movies"><a href="/liuqi_blogs/movies/" rel="section"><i class="fa fa-video fa-fw"></i>观影</a></li><li class="menu-item menu-item-books"><a href="/liuqi_blogs/books/" rel="section"><i class="fa fa-book fa-fw"></i>阅读</a></li><li class="menu-item menu-item-links"><a href="/liuqi_blogs/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-commonweal"><a href="https://tding.top/404" rel="noopener" target="_blank"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue-%E9%A1%B5%E9%9D%A2%E4%BC%98%E5%8C%96"><span class="nav-text">Vue 页面优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#v-for-%E4%BC%98%E5%8C%96"><span class="nav-text">v-for 优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%9C%A8%E5%90%8C%E4%B8%80%E7%BA%A7%E4%BD%BF%E7%94%A8-v-for%E3%80%81v-if"><span class="nav-text">不在同一级使用 v-for、v-if</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-for-%E7%9A%84-key-%E5%80%BC"><span class="nav-text">v-for 的 key 值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%95%BF%E5%88%97%E8%A1%A8%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="nav-text">长列表性能优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Webpack-%E6%89%93%E5%8C%85%E7%9B%B8%E5%85%B3%E4%BC%98%E5%8C%96"><span class="nav-text">Webpack 打包相关优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#webpack-bundle-analyzer-%E6%89%93%E5%8C%85%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90"><span class="nav-text">webpack-bundle-analyzer 打包文件分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#depcheck-%E4%BE%9D%E8%B5%96%E5%88%86%E6%9E%90"><span class="nav-text">depcheck 依赖分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-%E5%AD%98%E5%9C%A8%E8%AF%AF%E5%88%A4"><span class="nav-text">注意事项 - 存在误判</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#compression-webpack-plugin-%E8%BF%9B%E8%A1%8C-gzip-%E5%8E%8B%E7%BC%A9"><span class="nav-text">compression-webpack-plugin 进行 gzip 压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#terser-webpack-plugin-%E6%89%93%E5%8C%85%E6%97%B6%E5%8E%BB%E9%99%A4-console-log-%E4%BB%A5%E5%8F%8A-debugger-%E7%AD%89"><span class="nav-text">terser-webpack-plugin 打包时去除 console.log 以及 debugger 等</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lodash-%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5"><span class="nav-text">lodash 按需引入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#lodash-webpack-plugin-%E9%97%AE%E9%A2%98"><span class="nav-text">lodash-webpack-plugin 问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Moment-%E6%8C%89%E9%9C%80%E6%89%93%E5%8C%85"><span class="nav-text">Moment 按需打包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="nav-text">组件路由懒加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#splitChunks-%E8%BF%9B%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2"><span class="nav-text">splitChunks 进行代码分割</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2%E6%96%B9%E5%BC%8F"><span class="nav-text">常见代码分割方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#splitChunks-%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="nav-text">splitChunks 默认配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#chunks"><span class="nav-text">chunks</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cache-groups"><span class="nav-text">cache groups</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%87%E7%94%A8%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="nav-text">采用的配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MiniCssExtractPlugin-%E6%8F%92%E4%BB%B6%E5%B0%86-CSS-%E6%8F%90%E5%8F%96%E5%88%B0%E5%8D%95%E7%8B%AC%E7%9A%84%E6%96%87%E4%BB%B6"><span class="nav-text">MiniCssExtractPlugin 插件将 CSS 提取到单独的文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-text">参考</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="bricklayer" src="/liuqi_blogs/uploads/imageHead.jpg"><p class="site-author-name" itemprop="name">bricklayer</p><div class="site-description" itemprop="description">The proper use of comments is to compensate for our failure to express ourself in code.</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/liuqi_blogs/archives/"><span class="site-state-item-count">51</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/liuqi_blogs/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/liuqi_blogs/tags/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="sidebar-button site-overview-item animated"><button><i class="fa fa-comment"></i> Chat</button></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://gitee.com/home_liuqi" title="GitHub → https:&#x2F;&#x2F;gitee.com&#x2F;home_liuqi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:lq289233@163.com" title="E-Mail → mailto:lq289233@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://stackoverflow.com/" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a></span></div><div><canvas id="canvas" style="width:60%">当前浏览器不支持canvas，请更换浏览器后再试</canvas></div><script>!function(){var o,a,r,f,t,i=[[[0,0,1,1,1,0,0],[0,1,1,0,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,0,1,1,0],[0,0,1,1,1,0,0]],[[0,0,0,1,1,0,0],[0,1,1,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[1,1,1,1,1,1,1]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,0,1,1,1,0],[0,0,1,1,1,1,0],[0,1,1,0,1,1,0],[1,1,0,0,1,1,0],[1,1,1,1,1,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,1,1]],[[1,1,1,1,1,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,0,0],[1,1,1,1,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,1,1,0,0,0,0]],[[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0]]],e=document.getElementById("canvas");function h(t,e){for(var n=[1,2,3],l=["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"],o=0;o<i[e].length;o++)for(var a,h=0;h<i[e][o].length;h++){1==i[e][o][h]&&(a={x:14*(f+2)*t+2*h*(f+1)+(f+1),y:2*o*(f+1)+(f+1),stepX:Math.floor(4*Math.random()-2),stepY:-2*n[Math.floor(Math.random()*n.length)],color:l[Math.floor(Math.random()*l.length)],disY:1},r.push(a))}}function n(){e.height=100;for(var t=0;t<a.length;t++)!function(t,e){for(var n=0;n<i[e].length;n++)for(var l=0;l<i[e][n].length;l++)1==i[e][n][l]&&(o.beginPath(),o.arc(14*(f+2)*t+2*l*(f+1)+(f+1),2*n*(f+1)+(f+1),f,0,2*Math.PI),o.closePath(),o.fill())}(t,a[t]);for(t=0;t<r.length;t++)o.beginPath(),o.arc(r[t].x,r[t].y,f,0,2*Math.PI),o.fillStyle=r[t].color,o.closePath(),o.fill()}e.getContext&&(o=e.getContext("2d"),e.height=100,e.width=700,o.fillStyle="#f00",o.fillRect(10,10,50,50),a=[],r=[],f=e.height/20-1,t=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),a.push(t[1],t[2],10,t[3],t[4],10,t[5],t[6]),clearInterval(void 0),setInterval(function(){!function(){var t=[],e=/(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date),n=[];n.push(e[1],e[2],10,e[3],e[4],10,e[5],e[6]);for(var l=a.length-1;0<=l;l--)n[l]!==a[l]&&t.push(l+"_"+(Number(a[l])+1)%10);for(l=0;l<t.length;l++)h.apply(this,t[l].split("_"));a=n.concat()}(),function(){for(var t=0;t<r.length;t++)r[t].stepY+=r[t].disY,r[t].x+=r[t].stepX,r[t].y+=r[t].stepY,(r[t].x>700+f||r[t].y>100+f)&&(r.splice(t,1),t--)}(),n()},50))}()</script></div></div><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=66282&auto=0&height=66"></iframe><div class="back-to-top animated" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://gitee.com/home_liuqi" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2022/02/12/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/liuqi_blogs/uploads/imageHead.jpg"><meta itemprop="name" content="bricklayer"><meta itemprop="description" content="The proper use of comments is to compensate for our failure to express ourself in code."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="刘琪的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">前端页面性能优化</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-02-12 10:01:14" itemprop="dateCreated datePublished" datetime="2022-02-12T10:01:14+08:00">2022-02-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-02-24 12:02:56" itemprop="dateModified" datetime="2022-02-24T12:02:56+08:00">2022-02-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/liuqi_blogs/categories/%E5%89%8D%E7%AB%AF%EF%BC%8C%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">前端，性能优化</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>14k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>13 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>前端 Vue 工程的性能优化笔记。</p><p>前端性能优化的目的是为了让用户访问网站的时候可以非常快的加载出来，常见的优化方法：减小资源大小、CDN 加速、浏览器缓存。</p><h2 id="Vue-页面优化"><a href="#Vue-页面优化" class="headerlink" title="Vue 页面优化"></a>Vue 页面优化</h2><h3 id="v-for-优化"><a href="#v-for-优化" class="headerlink" title="v-for 优化"></a>v-for 优化</h3><h4 id="不在同一级使用-v-for、v-if"><a href="#不在同一级使用-v-for、v-if" class="headerlink" title="不在同一级使用 v-for、v-if"></a>不在同一级使用 v-for、v-if</h4><p>当 v-if 与 v-for 一起使用时，v-for 具有比 v-if 更高的优先级，<strong>这意味着 v-if 将分别重复运行于每个 v-for 循环中</strong>。</p><span id="more"></span><p>要避免出现这种情况，则在外层嵌套 template，在这一层进行 v-if 判断，然后在内部进行 v-for 循环，如果条件出现在循环内部，可通过计算属性提前过滤掉那些不需要显示的项。</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt; </span><br><span class="line">&lt;html&gt; </span><br><span class="line">&lt;head&gt; </span><br><span class="line">    &lt;title&gt;Vue事件处理&lt;/title&gt; </span><br><span class="line">&lt;/head&gt; </span><br><span class="line">&lt;body&gt; </span><br><span class="line">    &lt;div id=&quot;demo&quot;&gt; </span><br><span class="line">        &lt;h1&gt;v-for和v-if谁的优先级高？应该如何正确使用避免性能问题？&lt;/h1&gt; </span><br><span class="line">        &lt;!-- &lt;p v-for=&quot;child in children&quot; v-if=&quot;isFolder&quot;&gt;&#123;&#123;child.title&#125;&#125;&lt;/p&gt; --&gt; </span><br><span class="line">        &lt;template v-if=&quot;isFolder&quot;&gt; </span><br><span class="line">            &lt;p v-for=&quot;child in children&quot;&gt;&#123;&#123;child.title&#125;&#125;&lt;/p&gt; </span><br><span class="line">        &lt;/template&gt; </span><br><span class="line">    &lt;/div&gt; </span><br><span class="line">    &lt;script src=&quot;../../dist/vue.js&quot;&gt;&lt;/script&gt; </span><br><span class="line">    &lt;script&gt; </span><br><span class="line">        // 创建实例 </span><br><span class="line">        const app = new Vue(&#123; </span><br><span class="line">            el: &#x27;#demo&#x27;, </span><br><span class="line">            data() &#123; </span><br><span class="line">                return &#123; </span><br><span class="line">                    children: [ </span><br><span class="line">                        &#123;title:&#x27;foo&#x27;&#125;, </span><br><span class="line">                        &#123;title:&#x27;bar&#x27;&#125;, </span><br><span class="line">                    ] </span><br><span class="line">                &#125; </span><br><span class="line">            &#125;, </span><br><span class="line">            computed: &#123; </span><br><span class="line">                isFolder() &#123; </span><br><span class="line">                    return this.children &amp;&amp; this.children.length &gt; 0                  </span><br><span class="line">                &#125; </span><br><span class="line">            &#125;, </span><br><span class="line">        &#125;); </span><br><span class="line">        console.log(app.$options.render); </span><br><span class="line">    &lt;/script&gt; </span><br><span class="line">&lt;/body&gt; </span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>两者同级时，渲染函数如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(function anonymous(</span><br><span class="line">) &#123;</span><br><span class="line">    with (this) &#123;</span><br><span class="line">        return _c(&#x27;div&#x27;, &#123; attrs: &#123; &quot;id&quot;: &quot;demo&quot; &#125; &#125;, [_c(&#x27;h1&#x27;, [_v(&quot;v-for和v-if谁的优先 级高？应该如何正确使用避免性能问题？&quot;)]), _v(&quot; &quot;),</span><br><span class="line">        _l((children), function (child) &#123;</span><br><span class="line">            return (isFolder) ? _c(&#x27;p&#x27;,</span><br><span class="line">                [_v(_s(child.title))]) : _e()</span><br><span class="line">        &#125;)], 2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>两者不同级时，渲染函数如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(function anonymous(</span><br><span class="line">) &#123;</span><br><span class="line">    with (this) &#123;</span><br><span class="line">        return _c(&#x27;div&#x27;, &#123; attrs: &#123; &quot;id&quot;: &quot;demo&quot; &#125; &#125;, [_c(&#x27;h1&#x27;, [_v(&quot;v-for和v-if谁的优先 级高？应该如何正确使用避免性能问题？&quot;)]), _v(&quot; &quot;),</span><br><span class="line">        (isFolder) ? _l((children), function (child) &#123;</span><br><span class="line">            return _c(&#x27;p&#x27;,</span><br><span class="line">                [_v(_s(child.title))])</span><br><span class="line">        &#125;) : _e()], 2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="v-for-的-key-值"><a href="#v-for-的-key-值" class="headerlink" title="v-for 的 key 值"></a>v-for 的 key 值</h3><ul><li><a target="_blank" rel="noopener" href="https://tding.top/archives/28aaa65b.html">Vue 的 v-for 为什么要加 key</a></li></ul><p><strong>注意：不建议使用 index 作为 key 值</strong>。</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">         下标</span><br><span class="line">1. 前天   0</span><br><span class="line">2. 昨天   1</span><br><span class="line">3. 今天   2</span><br><span class="line">4. 明天   3</span><br></pre></td></tr></table></figure><p>假设我们删除了 List 中下标为 1 的数据：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">         下标</span><br><span class="line">1. 前天   0</span><br><span class="line">2. 今天   1</span><br><span class="line">3. 明天   2</span><br></pre></td></tr></table></figure><p>我们可以发现，除了第一个数据以外，其余数据的下标均发生了变化。以前的数据和重新渲染后的数据随着 key 值的变化从而没法建立关联关系，这就失去了 key 值存在的意义。</p><h3 id="长列表性能优化"><a href="#长列表性能优化" class="headerlink" title="长列表性能优化"></a>长列表性能优化</h3><p>当你把一个普通的 JavaScript 对象传给 Vue 实例的 data 选项，Vue 将遍历此对象所有的属性，并使用 <code>Object.defineProperty</code> 把这些属性全部转为 <code>getter/setter</code>，这些 <code>getter/setter</code> 对用户来说是不可见的，但是在内部它们让 Vue 追踪依赖，在属性被访问和修改时通知变化。</p><p>然而有些时候我们的组件就是<strong>纯粹的数据展示，不会有任何改变</strong>，我们就不需要 Vue 来劫持我们的数据，在大量数据展示的情况下，这能够很明显的减少组件初始化的时间，那如何禁止 Vue 劫持我们的数据呢？可以通过 <code>Object.freeze</code> 方法来冻结一个对象，一旦被冻结的对象就再也不能被修改了。</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data: () =&gt; (&#123;</span><br><span class="line">    users: &#123;&#125;</span><br><span class="line">  &#125;),</span><br><span class="line">  async created() &#123;</span><br><span class="line">    const users = await axios.get(&quot;/api/users&quot;);</span><br><span class="line">    this.users = Object.freeze(users);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p><code>Object.freeze()</code> 可以冻结一个对象。<strong>一个被冻结的对象再也不能被修改；不能向这个对象添加新的属性，不能删除已有属性，不能修改该对象已有属性的可枚举性、可配置性、可写性，以及不能修改已有属性的值</strong>。此外，冻结一个对象后该对象的原型也不能被修改。</p></blockquote><h2 id="Webpack-打包相关优化"><a href="#Webpack-打包相关优化" class="headerlink" title="Webpack 打包相关优化"></a>Webpack 打包相关优化</h2><p>我们可以对 webpack 打包过程进行优化，从而去减小资源大小，主要方法：</p><ul><li>压缩资源：<ul><li>compression-webpack-plugin 进行 gzip 压缩</li><li>terser-webpack-plugin 打包时去除 <code>console.log</code> 以及 <code>debugger</code></li></ul></li><li>按需打包：<ul><li>lodash 按需引入</li><li>moment 按需打包</li></ul></li><li>按需加载：<ul><li>组件路由懒加载</li></ul></li><li>代码分割：分割各个模块代码，提取相同部分代码，从而减少重复代码<ul><li>splitChunks 进行代码分割</li></ul></li></ul><p>在进行优化之前，首先通过 webpack-bundle-analyzer 插件去直观的看一下项目中各个模块的大小。</p><h3 id="webpack-bundle-analyzer-打包文件分析"><a href="#webpack-bundle-analyzer-打包文件分析" class="headerlink" title="webpack-bundle-analyzer 打包文件分析"></a>webpack-bundle-analyzer 打包文件分析</h3><p>通过使用 <code>webpack-bundle-analyzer</code> 可以让我们非常直观的看到项目中各模块的大小，方便后续进行优化。</p><p>依赖安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-bundle-analyzer –save-dev</span><br></pre></td></tr></table></figure><p>然后在 <code>vue.config.js</code> 中添加配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const BundleAnalyzerPlugin = require(&#x27;webpack-bundle-analyzer&#x27;).BundleAnalyzerPlugin</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  configureWebpack: (config) =&gt; &#123;</span><br><span class="line">    config.plugins.push(</span><br><span class="line">      new BundleAnalyzerPlugin()</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里使用默认配置（<code>new BundleAnalyzerPlugin()</code>）。</p><p>然后每次运行时，系统默认浏览器打开 <code>http://127.0.0.1:8888/</code>，展示项目的分析结果。</p><p>可选的配置选项：</p><ul><li><code>analyzerMode:&#39;server&#39;</code>，可以是 server，static 或 disabled。在 server 模式下，分析器将启动 HTTP 服务器来显示软件包报告。在 “静态” 模式下，会生成带有报告的单个 HTML 文件。在 disabled 模式下，你可以使用这个插件来将 generateStatsFile 设置为 true 来生成 Webpack Stats JSON 文件。</li><li><code>analyzerHost: &#39;127.0.0.1&#39;</code>, 将在 “服务器” 模式下使用的端口启动 HTTP 服务器。</li><li><code>analyzerPort: 8888</code>, 端口号。</li><li><code>reportFilename: &#39;report.html&#39;</code>, 路径捆绑，将在 static 模式下生成的报告文件。相对于捆绑输出目录。</li><li><code>defaultSizes: &#39;parsed&#39;</code>，默认显示在报告中的模块大小匹配方式。应该是 stat，parsed 或者 gzip 中的一个。</li><li><code>openAnalyzer: true</code>：在默认浏览器中自动打开报告。</li><li><code>generateStatsFile:false</code>: 如果为 true，则 Webpack Stats JSON 文件将在 bundle 输出目录中生成。</li><li><code>statsFilename: &#39;stats.json&#39;</code>, 相对于捆绑输出目录。</li><li><code>statsOptions: null</code>，<code>stats.toJson()</code> 方法的选项。例如，您可以使用 <code>source:false</code> 选项排除统计文件中模块的来源。在这里查看更多选项：<a target="_blank" rel="noopener" href="https://github.com/webpack/webpack/blob/webpack-1/lib/Stats.js#L21">https://github.com/webpack/webpack/blob/webpack-1/lib/Stats.js#L21</a></li><li><code>logLevel: &#39;info&#39;</code>，日志级别，可以是 info, warn, error, silent。</li><li><code>excludeAssets:null</code>，用于排除分析一些文件。</li></ul><p>默认配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">new BundleAnalyzerPlugin(&#123;</span><br><span class="line">  analyzerMode: &#x27;server&#x27;,</span><br><span class="line">  analyzerHost: &#x27;127.0.0.1&#x27;,</span><br><span class="line">  analyzerPort: 8888, </span><br><span class="line">  reportFilename: &#x27;report.html&#x27;,</span><br><span class="line">  defaultSizes: &#x27;parsed&#x27;,</span><br><span class="line">  openAnalyzer: true,</span><br><span class="line">  generateStatsFile: false, </span><br><span class="line">  statsFilename: &#x27;stats.json&#x27;,</span><br><span class="line">  statsOptions: null,</span><br><span class="line">  logLevel: &#x27;info&#x27;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="depcheck-依赖分析"><a href="#depcheck-依赖分析" class="headerlink" title="depcheck 依赖分析"></a>depcheck 依赖分析</h3><p>随着项目工程逐步变大，引入的依赖也越来越多，其中有不少其实已经不再用到了，完全可以删除来减小依赖，这里可以用 depcheck 工具去检测是否不再使用。</p><p>依赖安装，全局安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g depcheck</span><br></pre></td></tr></table></figure><p>然后在项目工程的目录下执行命令 depcheck，下面是检测结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Unused dependencies</span><br><span class="line">* amfe-flexible</span><br><span class="line">* core-js</span><br><span class="line">* file-saver</span><br><span class="line">* less-loader</span><br><span class="line">* postcss</span><br><span class="line">* vue-axios</span><br><span class="line">* vue-datepicker</span><br><span class="line">* vue-notification</span><br><span class="line">* vuejs-datepicker</span><br><span class="line">Unused devDependencies</span><br><span class="line">* @vue/cli-plugin-babel</span><br><span class="line">* @vue/cli-plugin-eslint</span><br><span class="line">* @vue/cli-plugin-unit-mocha</span><br><span class="line">* @vue/test-utils</span><br><span class="line">* babel-eslint</span><br><span class="line">* chai</span><br><span class="line">* postcss-pxtorem</span><br><span class="line">* sass</span><br><span class="line">* sass-loader</span><br><span class="line">Missing dependencies</span><br><span class="line">* moment: .\vue.config.js</span><br><span class="line">* terser-webpack-plugin: .\vue.config.js</span><br><span class="line">* video.js: .\src\main.js</span><br><span class="line">* q: .\src\router\index.js</span><br></pre></td></tr></table></figure><p>其中：</p><ul><li>Unused dependencies：表示没有使用的依赖包</li><li>Unused devDependencies：表示没有使用的开发环境依赖包</li><li>Missing dependencies：表示使用到了但是没有在 <code>package.json</code> 文件中声明的依赖包</li></ul><p>然后我们就可以根据检测结果进行无用依赖的删除。</p><h4 id="注意事项-存在误判"><a href="#注意事项-存在误判" class="headerlink" title="注意事项 - 存在误判"></a>注意事项 - 存在误判</h4><p><strong>这里 depcheck 依赖分析仅仅作为一个参考，存在部分误判的情况。</strong></p><ol><li>其实 <code>sass</code>、<code>sass-loader</code> 是有用到的，在 <code>&lt;style lang=&#39;sass&#39;&gt;</code> 这里。</li><li>其中 <code>less-loader</code> 是用到的，不过这个仅仅在开发环境需要，因此：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall less-loader --save</span><br></pre></td></tr></table></figure><p>然后：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install less-loader --save-dev</span><br></pre></td></tr></table></figure><blockquote><p>运行后报错：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> error  in ./src/views/xxxxxx.vue?vue&amp;type=style&amp;index=0&amp;lang=less&amp;</span><br><span class="line"></span><br><span class="line">Module build failed (from ./node_modules/less-loader/dist/cjs.js):</span><br><span class="line">TypeError: this.getOptions is not a function</span><br><span class="line">    at Object.lessLoader (xxxxxx\node_modules\less-loader\dist\index.js:19:24)</span><br></pre></td></tr></table></figure><p>这是因为这个 <code>less-loader</code> 版本太高，移除后指定版本 <code>6.1.3</code> 安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall less-loader --save-dev</span><br><span class="line">npm install less-loader@6.1.3 --save-dev</span><br></pre></td></tr></table></figure></blockquote><h3 id="compression-webpack-plugin-进行-gzip-压缩"><a href="#compression-webpack-plugin-进行-gzip-压缩" class="headerlink" title="compression-webpack-plugin 进行 gzip 压缩"></a>compression-webpack-plugin 进行 gzip 压缩</h3><p>虽然 Nginx 可以将资源自动 gzip 压缩（开启 gzip 功能）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gzip on;              # 开启gzip</span><br><span class="line">gzip_min_length 2k;   # 超过2kb进行压缩</span><br><span class="line">gzip_disable msie6;   # ie6不适用gzip</span><br><span class="line">gzip_types text/css application/javascript text/javascript image/jpeg image/png image/gif;  # 需要处理的文件</span><br></pre></td></tr></table></figure><p><strong>不过这样会使得每次请求时都要压缩一次，比较浪费资源</strong>。</p><p>因此，我们可以通过 <code>compression-webpack-plugin</code> 插件，在打包时提前将资源 gzip 压缩好，保存在服务端。</p><p>依赖安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install compression-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure><p>注：不要安装最新版本，否则容易 build 失败，报错类似在 <code>xx.js</code> 中 <code>** undefined</code> 或者 <code>TypeEror</code> 之类的，一般都是版本问题。</p><p>然后在 <code>vue.config.js</code> 中添加配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const CompressionPlugin = require(&#x27;compression-webpack-plugin&#x27;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  configureWebpack: (config) =&gt; &#123;</span><br><span class="line">    config.plugins.push(</span><br><span class="line">      new CompressionPlugin(&#123;</span><br><span class="line">        test: /\.(js|css|html)?$/,</span><br><span class="line">        filename: &#x27;[path][base].gz&#x27;,</span><br><span class="line">        algorithm: &#x27;gzip&#x27;,</span><br><span class="line">        minRatio: 0.8,</span><br><span class="line">        deleteOriginalAssets: false</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>minRatio：只有压缩率小于这个值的资源才会被处理</li></ul><p><code>npm run build</code> 后，可以在 <code>dist/js</code> 目录下可以看 gzip 压缩前后的文件大小：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Mode           Length Name</span><br><span class="line">----           ------ ----</span><br><span class="line">-a----          53586 chunk-041bbe7c.1f705809.js</span><br><span class="line">-a----          12789 chunk-041bbe7c.1f705809.js.gz</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>**最后，别忘记在 Nginx 配置文件中开启 <code>gzip_static</code>**：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip_static  on;</span><br></pre></td></tr></table></figure><p>注：这种模式下，gzip 压缩文件都是提前准备好的，如果没有<code>.gz</code> 格式的文件就会自动返回原文件。</p><h3 id="terser-webpack-plugin-打包时去除-console-log-以及-debugger-等"><a href="#terser-webpack-plugin-打包时去除-console-log-以及-debugger-等" class="headerlink" title="terser-webpack-plugin 打包时去除 console.log 以及 debugger 等"></a><code>terser-webpack-plugin</code> 打包时去除 <code>console.log</code> 以及 <code>debugger</code> 等</h3><p>由于 <code>uglifyjs-webpack-plugin</code> 不识别 ES6 的语法，vue-cli3.0 在打包过程中就使用了 <code>terser-webpack-plugin</code> 插件进行优化。</p><p><strong>由于 vue-cli 工具中已经用到了 <code>terser-webpack-plugin</code>，因此在 vue-cli 新建的项目中可以直接引入 <code>terser-webpack-plugin</code>，无需安装。</strong></p><p>在 <code>vue.config.js</code> 中添加配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const TerserPlugin = require(&quot;terser-webpack-plugin&quot;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  configureWebpack: (config) =&gt; &#123;</span><br><span class="line">    config.plugins.push(</span><br><span class="line">      new TerserPlugin(&#123;</span><br><span class="line">        terserOptions: &#123;</span><br><span class="line">          ecma: undefined,</span><br><span class="line">          warnings: false,</span><br><span class="line">          parse: &#123;&#125;,</span><br><span class="line">          compress: &#123;</span><br><span class="line">            drop_console: true,</span><br><span class="line">            drop_debugger: true,</span><br><span class="line">            pure_funcs: [&#x27;console.log&#x27;], // 移除console</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里去掉了 <code>console.log</code> 以及 <code>debugger</code>。</p><h3 id="lodash-按需引入"><a href="#lodash-按需引入" class="headerlink" title="lodash 按需引入"></a>lodash 按需引入</h3><p>完整引入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import _ from &#x27;lodash&#x27;</span><br></pre></td></tr></table></figure><p>手动按需引入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import debounce from &quot;lodash/debounce&quot;;</span><br></pre></td></tr></table></figure><p>或者使用插件 <code>babel-plugin-lodash</code>，然后在 <code>babel.config.js</code> 添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  plugins: [&quot;lodash&quot;],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>然后发现，只引入了 lodash 的几个方法，从数量上看还不到总量的零头，但是好像 lodash 的一大半都被打包进去了。比如，map 一共用到 121 个模块。</p><p>但是大多数人在使用时，并不会用到这些特殊的用法，却不得不为大量的冗余代码买单。因此，lodash 就提供了 <code>lodash-webpack-plugin</code> 这个插件，可以使得打包的代码量减少 99%。</p><p>插件用法，在 <code>vue.config.js</code> 中添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const LodashModuleReplacementPlugin = require(&quot;lodash-webpack-plugin&quot;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  chainWebpack: (config) =&gt; &#123;</span><br><span class="line">    config.plugin(&quot;loadshReplace&quot;).use(new LodashModuleReplacementPlugin());</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="lodash-webpack-plugin-问题"><a href="#lodash-webpack-plugin-问题" class="headerlink" title="lodash-webpack-plugin 问题"></a>lodash-webpack-plugin 问题</h4><p>不过，引入 <code>lodash-webpack-plugin</code> 后，例如，map 方法的其他各种奇奇怪怪的用法就失效了，只剩下最基本的类似 Array map 的用法。</p><p>一个例子：clamp 模块依赖 toNumber 进行参数处理（即支持传入字符串参数，并在内部先处理成数字）。<strong>但是使用 Plugin 后，Plugin 会把 toNumber 替换成 identity（即 <code>a =&gt; a</code>），导致 clamp 不再支持字符串参数</strong>。如果传入的是字符串，返回的结果将发生变化。</p><p>而且，**<code>lodash-webpack-plugin</code> 会影响第三方模块的行为**。如果第三方模块中也使用了 lodash 模块，而且用到了某些非常规用法，一旦使用了 Plugin 后，这个第三方模块使用的 lodash 的执行逻辑就可能发生变化。产生的后果可能是立即报错，也可能产生更严重的后果，即返回了和预期不一致的值，这个错误值在一系列流转之后，在另一个地方产生了 BUG。一旦出现了这种情况，因为这是一个第三方模块，问题的排查可能会非常困难。</p><p>结论：不建议使用 <code>lodash-webpack-plugin</code>。</p><h3 id="Moment-按需打包"><a href="#Moment-按需打包" class="headerlink" title="Moment 按需打包"></a>Moment 按需打包</h3><p><strong><code>moment.js</code> 占用空间大的原因在于，moment 中包含了大量语言资源文件，但其实我们并不需要这些。</strong></p><p>通过 webpack 自身的功能即可在打包时去掉这些用不到的语言包，在 <code>vue.config.js</code> 中添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&#x27;webpack&#x27;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  configureWebpack: config =&gt; &#123;</span><br><span class="line">    const plugins = [</span><br><span class="line">      // 只保留中文语言资源</span><br><span class="line">      new webpack.ContextReplacementPlugin(/moment[/\\]locale$/, /zh-cn/),</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="组件路由懒加载"><a href="#组件路由懒加载" class="headerlink" title="组件路由懒加载"></a>组件路由懒加载</h3><p><strong>我们可以将不同路由对应的组件分割成不同的代码块，这样，当路由被访问的时候才加载对应组件</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const Foo = () =&gt; import(&#x27;./Foo.vue&#x27;)</span><br><span class="line"></span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">  routes: [&#123; path: &#x27;/foo&#x27;, component: Foo &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="splitChunks-进行代码分割"><a href="#splitChunks-进行代码分割" class="headerlink" title="splitChunks 进行代码分割"></a>splitChunks 进行代码分割</h3><h4 id="常见代码分割方式"><a href="#常见代码分割方式" class="headerlink" title="常见代码分割方式"></a>常见代码分割方式</h4><p>Webpack 中有以下三种常见的代码分割方式:</p><ul><li>入口起点：使用 entry 配置手动地分离代码</li><li>动态导入：通过模块的内联函数调用来分离代码</li><li>防止重复：使用 splitChunks 去重和分离 chunk</li></ul><p>第一种方式，很简单，只需要在 entry 里配置多个入口即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123; app: &quot;./index.js&quot;, app1: &quot;./index1.js&quot; &#125;</span><br></pre></td></tr></table></figure><p>第二种方式，就是在代码中自动将使用 <code>import()</code> 加载的模块分离成独立的包：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//...</span><br><span class="line">import(&quot;./a&quot;);</span><br><span class="line">//...</span><br></pre></td></tr></table></figure><p>第三种方式，是使用 splitChunks 插件，配置分离规则，然后 webpack 自动将满足规则的 chunk 分离。一切都是自动完成的。</p><h4 id="splitChunks-默认配置"><a href="#splitChunks-默认配置" class="headerlink" title="splitChunks 默认配置"></a>splitChunks 默认配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">splitChunks: &#123;</span><br><span class="line">  // 表示选择哪些 chunks 进行分割，可选值有：async，initial和all</span><br><span class="line">  chunks: &quot;async&quot;,</span><br><span class="line">  // 表示新分离出的chunk必须大于等于minSize，默认为30000，约30kb。</span><br><span class="line">  minSize: 30000,</span><br><span class="line">  // 表示一个模块至少应被minChunks个chunk所包含才能分割。默认为1。</span><br><span class="line">  minChunks: 1,</span><br><span class="line">  // 表示按需加载文件时，并行请求的最大数目。默认为5。</span><br><span class="line">  maxAsyncRequests: 5,</span><br><span class="line">  // 表示加载入口文件时，并行请求的最大数目。默认为3。</span><br><span class="line">  maxInitialRequests: 3,</span><br><span class="line">  // 表示拆分出的chunk的名称连接符。默认为~。如chunk~vendors.js</span><br><span class="line">  automaticNameDelimiter: &#x27;~&#x27;,</span><br><span class="line">  // 设置chunk的文件名。默认为true。当为true时，splitChunks基于chunk和cacheGroups的key自动命名。</span><br><span class="line">  name: true,</span><br><span class="line">  // cacheGroups 下可以可以配置多个组，每个组根据test设置条件，符合test条件的模块，就分配到该组。模块可以被多个组引用，但最终会根据priority来决定打包到哪个组中。默认将所有来自node_modules目录的模块打包至vendors组，将两个以上的chunk所共享的模块打包至default组。</span><br><span class="line">  cacheGroups: &#123;</span><br><span class="line">    vendors: &#123;</span><br><span class="line">      test: /[\\/]node_modules[\\/]/,</span><br><span class="line">      priority: -10</span><br><span class="line">    &#125;,</span><br><span class="line">    // </span><br><span class="line">    default: &#123;</span><br><span class="line">      minChunks: 2,</span><br><span class="line">      priority: -20,</span><br><span class="line">      reuseExistingChunk: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="chunks"><a href="#chunks" class="headerlink" title="chunks"></a>chunks</h4><p>chunks 用以告诉 splitChunks 的作用对象，其可选值有 async、initial 和 all。默认值是 async，也就是默认只选取异步加载的 chunk 进行代码拆分。</p><p>示例：</p><p>当 <code>chunks: async</code>：</p><p><code>index.js</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import(&quot;./a&quot;);</span><br><span class="line"></span><br><span class="line">// ...</span><br></pre></td></tr></table></figure><p><code>a.js</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">// ...</span><br></pre></td></tr></table></figure><p>最后打包出来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.js    712 bytes</span><br><span class="line">2.js    234 kb</span><br><span class="line">app.js  8.46 kb</span><br></pre></td></tr></table></figure><ul><li><code>index.js</code> 作为入口文件，属于入口起点手动配置分割代码的情况，因此会独立打包。(<code>app.js</code>)</li><li><code>a.js</code> 通过 <code>import()</code> 进行加载，属于动态导入的情况，因此会独立打出一个包。(<code>1.js</code>)</li><li>vue 来自 <code>node_modules</code> 目录，并且大于 30kb；将其从 <code>a.js</code> 拆出后，与 <code>a.js</code> 并行加载，并行加载的请求数为 2，未超过默认的 5；vue 拆分后，并行加载的入口文件并无增加，未超过默认的 3。vue 也符合 splitChunks 的拆分条件，单独打了一个包。(<code>2.js</code>)</li></ul><p><strong>当 <code>chunks: initial</code>：splitChunks 的作用范围变成了非异步加载的初始 chunk</strong>，例如我们的 <code>index.js</code> 就是初始化的时候就存在的 chunk。而 vue 模块是在异步加载的 chunk <code>a.js</code> 中引入的，所以并不会被分离出来。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.js    234 kb</span><br><span class="line">app.js  8.46 kb</span><br></pre></td></tr></table></figure><p>如果这样修改下：</p><p><code>index.js</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;vue&#x27;</span><br><span class="line">import(&#x27;./a&#x27;)</span><br></pre></td></tr></table></figure><p><code>a.js</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#x27;a&#x27;)</span><br></pre></td></tr></table></figure><p>最后打包出来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2.js    638 bytes</span><br><span class="line">app.js    9.52 kb</span><br><span class="line">index.html  294 bytes</span><br><span class="line">vendors~app.js  234 kb</span><br></pre></td></tr></table></figure><p>可以看到，vue 在 <code>index.js</code> 直接被引入，而 <code>index.js</code> 是初始 chunk，所以分离出来打到了 <code>vendors~app.js</code> 中。</p><p><strong>当 <code>chunks: all</code>：</strong></p><p><code>index.js</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;vue-router&#x27;</span><br><span class="line">import(&quot;./a&quot;);</span><br></pre></td></tr></table></figure><p><code>a.js</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &quot;vue&quot;;</span><br></pre></td></tr></table></figure><p>最后打包出来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2.js    706 bytes</span><br><span class="line">3.js    234 kb</span><br><span class="line">app.js  9.55 kb</span><br><span class="line">index.html  294 bytes</span><br><span class="line">vendors~app.js  72.6 kb</span><br></pre></td></tr></table></figure><p><strong>splitChunks 的作用范围包括了初始 chunk 和异步 chunk 两种场景。</strong>因此 <code>index.js</code> 中的 vue-router 被分拆到了 <code>vendors~app.js</code> 中，而异步加载的 chunk <code>a.js</code> 中的 vue 被分拆到了 <code>3.js</code> 中。</p><h4 id="cache-groups"><a href="#cache-groups" class="headerlink" title="cache groups"></a>cache groups</h4><p><strong>cacheGroups 继承 splitChunks 里的所有属性的值</strong>，如 chunks、minSize、minChunks、maxAsyncRequests、maxInitialRequests、automaticNameDelimiter、name，我们还可以在 cacheGroups 中重新赋值，覆盖 splitChunks 的值。另外，还有一些属性只能在 cacheGroups 中使用：test、priority、reuseExistingChunk。</p><p>cacheGroups 有两个默认的组，一个是 vendors，所有来自 <code>node_modules</code> 目录的模块；一个 default，包含了由两个以上的 chunk 所共享的模块。</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">chunks:&#x27;all&#x27;,</span><br><span class="line">cacheGroups: &#123;</span><br><span class="line">  vendors: &#123;</span><br><span class="line">    test: /[\\/]node_modules[\\/]/,</span><br><span class="line">    name: &quot;customName&quot;,</span><br><span class="line">    priority: -10</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="采用的配置"><a href="#采用的配置" class="headerlink" title="采用的配置"></a>采用的配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  chainWebpack: (config) =&gt; &#123;</span><br><span class="line">    config.optimization.splitChunks(&#123;</span><br><span class="line">      chunks: &#x27;all&#x27;,</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        //公用模块抽离</span><br><span class="line">        common: &#123;</span><br><span class="line">          name: &#x27;chunk-common&#x27;,</span><br><span class="line">          chunks: &#x27;initial&#x27;,</span><br><span class="line">          minChunks: 2, //抽离公共代码时，这个代码块最小被引用的次数</span><br><span class="line">        &#125;,</span><br><span class="line">        //第三方库抽离</span><br><span class="line">        vendors: &#123;</span><br><span class="line">          name: &#x27;chunk-vendors&#x27;,</span><br><span class="line">          priority: 1, //权重</span><br><span class="line">          test: /node_modules/,</span><br><span class="line">          chunks: &#x27;initial&#x27;,</span><br><span class="line">          minChunks: 2, //在分割之前，这个代码块最小应该被引用的次数</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MiniCssExtractPlugin-插件将-CSS-提取到单独的文件"><a href="#MiniCssExtractPlugin-插件将-CSS-提取到单独的文件" class="headerlink" title="MiniCssExtractPlugin 插件将 CSS 提取到单独的文件"></a>MiniCssExtractPlugin 插件将 CSS 提取到单独的文件</h3><p>此插件为每个包含 CSS 的 JS 文件创建一个单独的 CSS 文件，并支持 CSS 和 SourceMap 的按需加载。</p><p><strong>注意：这里说的每个包含 CSS 的 JS 文件，并不是说组件对应的 JS 文件，而是打包之后的 JS 文件</strong>。</p><p>优点：</p><ul><li><strong>CSS 请求并行</strong>，如果样式文件大小较大，这会做更快提前加载</li><li>CSS 单独缓存</li></ul><p>缺点：</p><ul><li>需要额外的 HTTP 请求</li></ul><p>依赖安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure><p><code>vue.config.js</code> 添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const MiniCssExtractPlugin = require(&#x27;mini-css-extract-plugin&#x27;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  chainWebpack: (config) =&gt; &#123;</span><br><span class="line">    let miniCssExtractPlugin = new MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: &#x27;assets/[name].[hash:8].css&#x27;,</span><br><span class="line">      chunkFilename: &#x27;assets/[name].[hash:8].css&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">    config.plugin(&#x27;extract-css&#x27;).use(miniCssExtractPlugin);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>filename：控制从打包后的<strong>入口 JS 文件</strong>中提取 CSS 样式生成的 CSS 文件的名称。</li><li>chunkFilename：控制从打包后的<strong>非入口 JS 文件</strong>中提取 CSS 样式生成的 CSS 文件的名称。</li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/goloving/p/13993388.html">浅析 vue 项目性能优化应该注意的点</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6966071095422091301">vue 须知（1）—— v-if 和 v-for 哪个优先级更高？如果两个同时出现，应该怎么优化得到更好的性能？</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/z591102/article/details/106682298">为什么不建议使用 index 作为 key 值</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/goloving/p/13969685.html">vue 利用 object.freeze 提升列表渲染性能</a></li><li><a target="_blank" rel="noopener" href="https://newsn.net/say/webpack-bundle-analyzer.html">webpack4 系列教程，性能分析利器 webpack-bundle-analyzer</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44197671/article/details/115404615">vue-cli3 gzip 和 uglifyjs 使用</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/hututututututu/article/details/109715223">terser-webpack-plugin 替代 uglifyjs-webpack-plugin</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44979432/article/details/118295943">vue 项目中 webpack 使用（terser-webpack-plugin）打包时候去掉 console.log 与 debugger 调试</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qq735675958/p/14609903.html">lodash 按需引入</a></li><li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/349260482">为什么你应该立即停止使用 lodash-webpack-plugin</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904103848443912">如何使用 splitChunks 精细控制代码分割</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6850418117500715015">『Webpack 系列』—— MiniCssExtractPlugin 插件用法详解</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903853410746382">demo14 webpack mini-css-extract-plugin + SplitChunksPlugin 处理 css 和 scss</a></li></ul></div><footer class="post-footer"><div><div class="end-slogan" style="text-align:center;font-size:22px;letter-spacing:10px;user-seclect:none;color:#bbb">----------- 本文结束啦<i class="fa fa-star"></i>感谢您阅读-----------</div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>bricklayer</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://dreamtraveler-liuqi.github.io/liuqi_blogs/2022/02/12/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="前端页面性能优化">https://dreamtraveler-liuqi.github.io/liuqi_blogs/2022/02/12/前端页面性能优化/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="post-tags"><a href="/liuqi_blogs/tags/%E5%89%8D%E7%AB%AF%EF%BC%8C%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" rel="tag"><i class="fa fa-tag"></i> 前端，性能优化</a></div><div class="post-nav"><div class="post-nav-item"><a href="/liuqi_blogs/2022/02/06/%E5%90%B8%E9%A1%B6%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0/" rel="prev" title="vue吸顶效果实现"><i class="fa fa-chevron-left"></i> vue吸顶效果实现</a></div><div class="post-nav-item"><a href="/liuqi_blogs/2022/02/19/token%E7%9A%84%E4%BD%BF%E7%94%A8/" rel="next" title="token的使用">token的使用 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments gitalk-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">bricklayer</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">208k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">3:09</span></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div><br><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("04/21/2019 15:54:40");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已安全运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/liuqi_blogs/js/comments.js"></script><script src="/liuqi_blogs/js/utils.js"></script><script src="/liuqi_blogs/js/motion.js"></script><script src="/liuqi_blogs/js/next-boot.js"></script><script src="/liuqi_blogs/js/bookmark.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script><script src="/liuqi_blogs/js/third-party/search/local-search.js"></script><script class="next-config" data-name="chatra" type="application/json">{"enable":true,"async":true,"id":"wTiSz28MRatGt3XP9"}</script><script src="/liuqi_blogs/js/third-party/chat/chatra.js"></script><script async src="https://call.chatra.io/chatra.js"></script><script src="/liuqi_blogs/js/third-party/pace.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://dreamtraveler-liuqi.github.io/liuqi_blogs/2022/02/12/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}</script><script src="/liuqi_blogs/js/third-party/quicklink.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous"><script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"dreamtraveler-LiuQi","repo":"liuqi_blogs","client_id":"19a753bd5b85ab148023","client_secret":"f7d55927c2a17ea02efbea90437fc31ee899daff","admin_user":"LiuQi","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"acd243f0c3d6657ac65b8267f507ffbc"}</script><script src="/liuqi_blogs/js/third-party/comments/gitalk.js"></script><script>class Circle {
    constructor({ origin, speed, color, angle, context }) {
        this.origin = origin
        this.position = { ...this.origin }
        this.color = color
        this.speed = speed
        this.angle = angle
        this.context = context
        this.renderCount = 0
      }

      draw() {
          this.context.fillStyle = this.color
          this.context.beginPath()
          this.context.arc(this.position.x, this.position.y, 2, 0, Math.PI * 2)
          this.context.fill()
      }

      move() {
          this.position.x = (Math.sin(this.angle) * this.speed) + this.position.x
          this.position.y = (Math.cos(this.angle) * this.speed) + this.position.y + (this.renderCount * 0.3)
          this.renderCount++
      }
  }
  class Boom {
      constructor({ origin, context, circleCount = 16, area }) {
          this.origin = origin
          this.context = context
          this.circleCount = circleCount
          this.area = area
          this.stop = false
          this.circles = []
      }

      randomArray(range) {
          const length = range.length
          const randomIndex = Math.floor(length * Math.random())
          return range[randomIndex]
      }

      randomColor() {
          const range = ['8', '9', 'A', 'B', 'C', 'D', 'E', 'F']
          return '#' + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range)
      }

      randomRange(start, end) {
          return (end - start) * Math.random() + start
      }

      init() {
          for (let i = 0; i < this.circleCount; i++) {
              const circle = new Circle({
                  context: this.context,
                  origin: this.origin,
                  color: this.randomColor(),
                  angle: this.randomRange(Math.PI - 1, Math.PI + 1),
                  speed: this.randomRange(1, 6)
              })
              this.circles.push(circle)
          }
      }

      move() {
          this.circles.forEach((circle, index) => {
              if (circle.position.x > this.area.width || circle.position.y > this.area.height) {
                  return this.circles.splice(index, 1)
              }
              circle.move()
          })
          if (this.circles.length == 0) {
              this.stop = true
          }
      }

      draw() {
          this.circles.forEach(circle => circle.draw())
      }
  }

  class CursorSpecialEffects {
      constructor() {
          this.computerCanvas = document.createElement('canvas')
          this.renderCanvas = document.createElement('canvas')

          this.computerContext = this.computerCanvas.getContext('2d')
          this.renderContext = this.renderCanvas.getContext('2d')

          this.globalWidth = window.innerWidth
          this.globalHeight = window.innerHeight

          this.booms = []
          this.running = false
      }

      handleMouseDown(e) {
          const boom = new Boom({
              origin: { x: e.clientX, y: e.clientY },
              context: this.computerContext,
              area: {
                  width: this.globalWidth,
                  height: this.globalHeight
              }
          })
          boom.init()
          this.booms.push(boom)
          this.running || this.run()
      }

      handlePageHide() {
          this.booms = []
          this.running = false
      }

      init() {
          const style = this.renderCanvas.style
          style.position = 'fixed'
          style.top = style.left = 0
          style.zIndex = '999999999999999999999999999999999999999999'
          style.pointerEvents = 'none'

          style.width = this.renderCanvas.width = this.computerCanvas.width = this.globalWidth
          style.height = this.renderCanvas.height = this.computerCanvas.height = this.globalHeight

          document.body.append(this.renderCanvas)

          window.addEventListener('mousedown', this.handleMouseDown.bind(this))
          window.addEventListener('pagehide', this.handlePageHide.bind(this))
      }

      run() {
          this.running = true
          if (this.booms.length == 0) {
              return this.running = false
          }

          requestAnimationFrame(this.run.bind(this))

          this.computerContext.clearRect(0, 0, this.globalWidth, this.globalHeight)
          this.renderContext.clearRect(0, 0, this.globalWidth, this.globalHeight)

          this.booms.forEach((boom, index) => {
              if (boom.stop) {
                  return this.booms.splice(index, 1)
              }
              boom.move()
              boom.draw()
          })
          this.renderContext.drawImage(this.computerCanvas, 0, 0, this.globalWidth, this.globalHeight)
      }
  }

  const cursorSpecialEffects = new CursorSpecialEffects()
  cursorSpecialEffects.init()</script><script>!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.POWERMODE=e():t.POWERMODE=e()}(this,function(){return r={},o.m=n=[function(t,e,l){"use strict";var n=document.createElement("canvas");n.width=window.innerWidth,n.height=window.innerHeight,n.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999",window.addEventListener("resize",function(){n.width=window.innerWidth,n.height=window.innerHeight}),document.body.appendChild(n);var r=n.getContext("2d"),c=[],p=0;function o(t,e){return Math.random()*(e-t)+t}function u(t){if(f.colorful){var e=o(0,360);return"hsla("+o(e-10,e+10)+", 100%, "+o(50,80)+"%, 1)"}return window.getComputedStyle(t).color}function f(){for(var t,e,o,n,r,i,a=function(){var t=document.activeElement;if("TEXTAREA"===t.tagName||"INPUT"===t.tagName&&"text"===t.getAttribute("type")){var e=l(1)(t,t.selectionStart),o=t.getBoundingClientRect();return{x:e.left+o.left,y:e.top+o.top,color:u(t)}}var n=window.getSelection();if(n.rangeCount){var r=n.getRangeAt(0),i=r.startContainer;return i.nodeType===document.TEXT_NODE&&(i=i.parentNode),{x:(o=r.getBoundingClientRect()).left,y:o.top,color:u(i)}}return{x:0,y:0,color:"transparent"}}(),d=5+Math.round(10*Math.random());d--;)c[p]=(t=a.x,e=a.y,o=a.color,{x:t,y:e,alpha:1,color:o,velocity:{x:2*Math.random()-1,y:2*Math.random()-3.5}}),p=(p+1)%500;f.shake&&(r=(n=1+2*Math.random())*(.5<Math.random()?-1:1),i=n*(.5<Math.random()?-1:1),document.body.style.marginLeft=r+"px",document.body.style.marginTop=i+"px",setTimeout(function(){document.body.style.marginLeft="",document.body.style.marginTop=""},75))}f.shake=!0,f.colorful=!1,requestAnimationFrame(function t(){requestAnimationFrame(t),r.clearRect(0,0,n.width,n.height);for(var e=0;e<c.length;++e){var o=c[e];o.alpha<=.1||(o.velocity.y+=.075,o.x+=o.velocity.x,o.y+=o.velocity.y,o.alpha*=.96,r.globalAlpha=o.alpha,r.fillStyle=o.color,r.fillRect(Math.round(o.x-1.5),Math.round(o.y-1.5),3,3))}}),t.exports=f},function(t,e){function o(t,e,o){var n,r=o&&o.debug||!1;!r||(n=document.querySelector("#input-textarea-caret-position-mirror-div"))&&n.parentNode.removeChild(n);var i=document.createElement("div");i.id="input-textarea-caret-position-mirror-div",document.body.appendChild(i);var a=i.style,d=window.getComputedStyle?getComputedStyle(t):t.currentStyle;a.whiteSpace="pre-wrap","INPUT"!==t.nodeName&&(a.wordWrap="break-word"),a.position="absolute",r||(a.visibility="hidden"),p.forEach(function(t){a[t]=d[t]}),u?t.scrollHeight>parseInt(d.height)&&(a.overflowY="scroll"):a.overflow="hidden",i.textContent=t.value.substring(0,e),"INPUT"===t.nodeName&&(i.textContent=i.textContent.replace(/\s/g," "));var l=document.createElement("span");l.textContent=t.value.substring(e)||".",i.appendChild(l);var c={top:l.offsetTop+parseInt(d.borderTopWidth),left:l.offsetLeft+parseInt(d.borderLeftWidth)};return r?l.style.backgroundColor="#aaa":document.body.removeChild(i),c}var p,u;p=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],u=null!=window.mozInnerScreenX,void 0!==t&&void 0!==t.exports?t.exports=o:window.getCaretCoordinates=o}],o.c=r,o.p="",o(0);function o(t){if(r[t])return r[t].exports;var e=r[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,o),e.loaded=!0,e.exports}var n,r})</script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE)</script><script src="/liuqi_blogs/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{jsonPath:"/liuqi_blogs/live2dw/assets/hibiki.model.json"},display:{position:"left",width:150,height:330},mobile:{show:!0},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>